<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Diagnostic Session Control</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../01_UDS/index.html"><strong aria-hidden="true">1.</strong> UDS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../01_UDS/01_Introduction.html"><strong aria-hidden="true">1.1.</strong> Einf√ºhrung</a></li><li class="chapter-item expanded "><a href="../01_UDS/02_Terms.html"><strong aria-hidden="true">1.2.</strong> Begriffe</a></li></ol></li><li class="chapter-item expanded "><a href="../02_Services/index.html"><strong aria-hidden="true">2.</strong> Services</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../02_Services/01_Diagnostic-Sessions-Control.html" class="active"><strong aria-hidden="true">2.1.</strong> Diagnostic Session Control</a></li><li class="chapter-item expanded "><a href="../02_Services/02_Control-DTC-Settings.html"><strong aria-hidden="true">2.2.</strong> Control DTC Settings</a></li><li class="chapter-item expanded "><a href="../02_Services/03_ECU-Reset.html"><strong aria-hidden="true">2.3.</strong> ECU-Reset</a></li></ol></li><li class="chapter-item expanded "><a href="../03_DTC/index.html"><strong aria-hidden="true">3.</strong> DTC</a></li><li class="chapter-item expanded "><a href="../04_CAPL/index.html"><strong aria-hidden="true">4.</strong> CAPL</a></li><li class="chapter-item expanded "><a href="../05_QA/index.html"><strong aria-hidden="true">5.</strong> QA</a></li><li class="chapter-item expanded "><a href="../06_Glossary/Glossary.html"><strong aria-hidden="true">6.</strong> Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="diagnosesitzungssteuerung-0x10"><a class="header" href="#diagnosesitzungssteuerung-0x10">Diagnosesitzungssteuerung (0x10)</a></h1>
<h2 id="einleitung"><a class="header" href="#einleitung">Einleitung</a></h2>
<p>Die Unified Diagnostic Services (UDS) sind ein wesentlicher Bestandteil der Fahrzeugdiagnose und erm√∂glichen es, verschiedene Diagnosedienste auf einer elektronischen Steuereinheit (ECU) zu implementieren. Diese Dokumentation bietet eine umfassende und detaillierte Erkl√§rung des Diagnosesitzungssteuerungsdienstes (0x10), einschlie√ülich Zweck, Beschreibung, unterst√ºtzter Subfunktionen, Anforderungs- und Antwortnachrichtenrahmen sowie unterst√ºtzter negativer R√ºckmeldecodes (NRCs).</p>
<h2 id="1-zweck"><a class="header" href="#1-zweck">1. Zweck</a></h2>
<p>Der Diagnosesitzungssteuerungsdienst (0x10) wird verwendet, um von einer Diagnosesitzung zu einer anderen zu wechseln. Verschiedene Sitzungen bieten unterschiedliche Diagnosefunktionen und Parameter, die je nach Nutzung, Standards, Empfehlungen oder Vorgaben des Original Equipment Manufacturer (OEM) variieren k√∂nnen.</p>
<h2 id="2-kurzbeschreibung"><a class="header" href="#2-kurzbeschreibung">2. Kurzbeschreibung</a></h2>
<p>Dieser Dienst aktiviert einen Satz von zeitlichen Parametern, die von der Datenverbindungsschicht (Schicht 2 im OSI-Modell) abh√§ngig sind. Es darf zu einem Zeitpunkt nur eine Sitzung aktiv sein. Wenn nach dem Hochfahren keine andere Sitzung aktiviert wurde, bleibt der Server in der Standardsitzung.</p>
<h2 id="3-unterst√ºtzte-subfunktionen"><a class="header" href="#3-unterst√ºtzte-subfunktionen">3. Unterst√ºtzte Subfunktionen</a></h2>
<p>Der Dienst 0x10 unterst√ºtzt mehrere Subfunktionen, die verschiedene Sitzungen repr√§sentieren:</p>
<ul>
<li><strong>00</strong>: Reserviert</li>
<li><strong>01</strong>: Standardsitzung (Default Session)</li>
<li><strong>02</strong>: Programmiersitzung (Programming Session)</li>
<li><strong>03</strong>: Erweiterte Diagnosesitzung (Extended Diagnostic Session)</li>
<li><strong>04</strong>: Sicherheitsdiagnosesitzung (Safety System Diagnostic Session)</li>
<li><strong>05-3F</strong>: Reserviert</li>
<li><strong>40-5F</strong>: Fahrzeugspezifisch (Vehicle Manufacturer Specific)</li>
<li><strong>60-7E</strong>: Systemlieferant spezifisch (System Supplier Specific)</li>
<li><strong>7F</strong>: Reserviert</li>
</ul>
<h2 id="4-detaillierte-beschreibung"><a class="header" href="#4-detaillierte-beschreibung">4. Detaillierte Beschreibung</a></h2>
<h3 id="sitzungskontrolle"><a class="header" href="#sitzungskontrolle">Sitzungskontrolle</a></h3>
<ul>
<li><strong>Aktivierung und Deaktivierung</strong>: Der Dienst erm√∂glicht es, zwischen verschiedenen Sitzungen zu wechseln. Jede Sitzung aktiviert einen eigenen Satz von zeitlichen Parametern und Diagnosefunktionen. Es darf zu jedem Zeitpunkt nur eine Sitzung aktiv sein.</li>
<li><strong>Initialisierung</strong>: Nach dem Hochfahren befindet sich das Steuerger√§t in der Standardsitzung. Wenn keine andere Sitzung angefordert wird, bleibt diese Sitzung aktiv.</li>
<li><strong>Diagnosef√§higkeit</strong>: Das Steuerger√§t muss in der Lage sein, Diagnosefunktionen unter normalen Betriebsbedingungen und unter anderen vom Fahrzeughersteller oder Systemlieferanten definierten Bedingungen bereitzustellen.</li>
<li><strong>Anforderung einer bereits laufenden Sitzung</strong>: Wenn der Tester eine bereits laufende Sitzung anfordert, sendet der Server eine positive Antwortnachricht und verh√§lt sich gem√§√ü den Eigenschaften der Sitzung.</li>
</ul>
<h3 id="subfunktion-00-reserviert"><a class="header" href="#subfunktion-00-reserviert">Subfunktion 00: Reserviert</a></h3>
<p>Diese Subfunktion ist f√ºr zuk√ºnftige Erweiterungen oder spezifische Implementierungen reserviert und wird aktuell nicht verwendet.</p>
<h3 id="subfunktion-01-standardsitzung-default-session"><a class="header" href="#subfunktion-01-standardsitzung-default-session">Subfunktion 01: Standardsitzung (Default Session)</a></h3>
<p>Die Standardsitzung ist die Basissitzung nach dem Hochfahren des Steuerger√§ts. Sie bietet grundlegende Diagnosefunktionen und ist die Fallback-Sitzung.</p>
<h3 id="subfunktion-02-programmiersitzung-programming-session"><a class="header" href="#subfunktion-02-programmiersitzung-programming-session">Subfunktion 02: Programmiersitzung (Programming Session)</a></h3>
<p>Diese Sitzung wird verwendet, um Steuerger√§te zu programmieren oder zu reflashen. Sie erm√∂glicht erweiterte Kommunikationsparameter und erfordert spezielle Sicherheitsma√ünahmen.</p>
<h3 id="subfunktion-03-erweiterte-diagnosesitzung-extended-diagnostic-session"><a class="header" href="#subfunktion-03-erweiterte-diagnosesitzung-extended-diagnostic-session">Subfunktion 03: Erweiterte Diagnosesitzung (Extended Diagnostic Session)</a></h3>
<p>Die erweiterte Diagnosesitzung bietet zus√§tzliche Diagnosefunktionen und erweiterte Kommunikationsparameter im Vergleich zur Standardsitzung.</p>
<h3 id="subfunktion-04-sicherheitsdiagnosesitzung-safety-system-diagnostic-session"><a class="header" href="#subfunktion-04-sicherheitsdiagnosesitzung-safety-system-diagnostic-session">Subfunktion 04: Sicherheitsdiagnosesitzung (Safety System Diagnostic Session)</a></h3>
<p>Diese Sitzung ist f√ºr die Diagnose von sicherheitskritischen Systemen vorgesehen und erfordert h√∂chste Sicherheits- und Kommunikationsstandards.</p>
<h3 id="sitzungs√ºberg√§nge"><a class="header" href="#sitzungs√ºberg√§nge">Sitzungs√ºberg√§nge</a></h3>
<ul>
<li><strong>Von Standardsitzung zu Standardsitzung</strong>: Der Server initialisiert die Standardsitzung neu, ohne den nichtfl√ºchtigen Speicher (NVM) zu beeinflussen.</li>
<li><strong>Von Standardsitzung zu einer anderen Sitzung</strong>: Der Server setzt nur die Ereignisse zur√ºck, die im Server konfiguriert sind. Periodische Zeitplaner bleiben aktiv.</li>
<li><strong>Kommunikationskontrolle und DTC-Einstellung</strong>: Die Zust√§nde der Kommunikationskontroll- und DTC-Einstellungsdienste bleiben unver√§ndert. Normaler Kommunikation bleibt deaktiviert, wenn sie zum Zeitpunkt des Sitzungswechsels deaktiviert war.</li>
</ul>
<h3 id="√úbergangsbedingungen"><a class="header" href="#√úbergangsbedingungen">√úbergangsbedingungen</a></h3>
<ul>
<li><strong>Positive Antwort vor Aktivierung</strong>: Bei Anforderung einer neuen Sitzung sendet der Server eine positive Antwort, bevor die Parameter der neuen Sitzung aktiv werden.</li>
<li><strong>Beibehaltung der Sitzungscharakteristik</strong>: Wenn eine bereits aktive Sitzung erneut angefordert wird, sendet der Server eine positive Antwort und die Sitzungseigenschaften bleiben unver√§ndert.</li>
</ul>
<h2 id="5-anforderungsnachrichtenrahmen"><a class="header" href="#5-anforderungsnachrichtenrahmen">5. Anforderungsnachrichtenrahmen</a></h2>
<p>Die Anforderung einer Diagnosesitzung erfolgt durch das Senden einer Nachricht mit dem Service-Identifikator (SID) 0x10 und der entsprechenden Subfunktions-ID. Das Format der Anforderung lautet wie folgt:</p>
<pre><code class="language-sh">[ 0x10, Subfunktions-ID ]
</code></pre>
<p>Beispiel f√ºr die Anforderung einer erweiterten Diagnosesitzung:</p>
<pre><code class="language-sh">[ 0x10, 0x03 ]
</code></pre>
<h2 id="6-positive-antwortnachricht"><a class="header" href="#6-positive-antwortnachricht">6. Positive Antwortnachricht</a></h2>
<p>Nach erfolgreicher Anforderung einer neuen Sitzung sendet der Server eine positive Antwortnachricht, bevor die neuen Sitzungsparameter aktiv werden. Das Format der positiven Antwort lautet wie folgt:</p>
<pre><code class="language-sh">[ 0x50, Subfunktions-ID ]
</code></pre>
<p>Beispiel f√ºr die positive Antwort auf die Anforderung einer erweiterten Diagnosesitzung:</p>
<pre><code class="language-sh">[ 0x50, 0x03 ]
</code></pre>
<h2 id="7-unterst√ºtzte-negative-response-codes-nrcs"><a class="header" href="#7-unterst√ºtzte-negative-response-codes-nrcs">7. Unterst√ºtzte Negative Response Codes (NRCs)</a></h2>
<p>Negative Antwortcodes werden gesendet, wenn eine Anforderung nicht erfolgreich ist. Die folgenden NRCs sind f√ºr den Dienst 0x10 definiert:</p>
<ul>
<li><strong>12 ‚Äì Subfunktion nicht unterst√ºtzt</strong>: Wird gesendet, wenn eine nicht implementierte oder falsche Subfunktion angefordert wird.</li>
<li><strong>13 ‚Äì Falsche Nachrichtenl√§nge oder ung√ºltiges Format</strong>: Wird gesendet, wenn die Nachrichtenl√§nge oder das Format ung√ºltig ist.</li>
<li><strong>22 ‚Äì Bedingungen nicht erf√ºllt</strong>: Wird gesendet, wenn die Voraussetzungen f√ºr die Anforderung der Diagnosesitzungssteuerung nicht erf√ºllt sind.</li>
</ul>
<h3 id="nrc-nachrichtenrahmen"><a class="header" href="#nrc-nachrichtenrahmen">NRC-Nachrichtenrahmen</a></h3>
<p>Das Format der negativen Antwort lautet wie folgt:</p>
<pre><code class="language-sh">[ PCI-L√§nge, Negativer Antwort-SID, NRC-Code ]
</code></pre>
<p>Beispiel f√ºr eine negative Antwort auf eine ung√ºltige Anforderung:</p>
<pre><code class="language-sh">[ 0x03, 0x7F, 0x10, 0x12 ]  // Subfunktion nicht unterst√ºtzt
</code></pre>
<h2 id="8-negative-response-frame"><a class="header" href="#8-negative-response-frame">8. Negative Response Frame</a></h2>
<h3 id="nrc-12-subfunktion-nicht-unterst√ºtzt"><a class="header" href="#nrc-12-subfunktion-nicht-unterst√ºtzt">NRC 12: Subfunktion nicht unterst√ºtzt</a></h3>
<p>Wenn eine nicht implementierte oder falsche Subfunktion angefordert wird, lautet die Antwort:</p>
<pre><code class="language-sh">[ 0x03, 0x7F, 0x10, 0x12 ]
</code></pre>
<h3 id="nrc-13-falsche-nachrichtenl√§nge"><a class="header" href="#nrc-13-falsche-nachrichtenl√§nge">NRC 13: Falsche Nachrichtenl√§nge</a></h3>
<p>Wenn die Nachrichtenl√§nge oder das Format ung√ºltig ist, lautet die Antwort:</p>
<pre><code class="language-sh">[ 0x03, 0x7F, 0x10, 0x13 ]
</code></pre>
<h3 id="nrc-22-bedingungen-nicht-erf√ºllt"><a class="header" href="#nrc-22-bedingungen-nicht-erf√ºllt">NRC 22: Bedingungen nicht erf√ºllt</a></h3>
<p>Wenn die Bedingungen f√ºr die Anforderung nicht erf√ºllt sind, lautet die Antwort:</p>
<pre><code class="language-sh">[ 0x03, 0x7F, 0x10, 0x22 ]
</code></pre>
<h2 id="schlussfolgerung"><a class="header" href="#schlussfolgerung">Schlussfolgerung</a></h2>
<p>Dieser Teil bietet eine detaillierte √úbersicht √ºber den Diagnosesitzungssteuerungsdienst (0x10) gem√§√ü den UDS-Standards. Durch das Verst√§ndnis der verschiedenen Sitzungen, deren Anforderungen und die entsprechenden positiven und negativen Antwortnachrichten k√∂nnen Diagnosetechniker effektiv mit den verschiedenen Diagnosezust√§nden eines Fahrzeugs arbeiten. Es ist wichtig, die spezifischen Implementierungen und Anforderungen des jeweiligen Fahrzeugherstellers oder Systemlieferanten zu ber√ºcksichtigen, um die korrekte Anwendung dieses Dienstes sicherzustellen.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../02_Services/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../02_Services/02_Control-DTC-Settings.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../02_Services/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../02_Services/02_Control-DTC-Settings.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
