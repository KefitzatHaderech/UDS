<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Tester Present</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Unified Diagnostic Services</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../01_UDS/01_Introduction.html"><strong aria-hidden="true">1.1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../01_UDS/02_Terms.html"><strong aria-hidden="true">1.2.</strong> Terms</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Services</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../02_Services/01_Diagnostic-Sessions-Control.html"><strong aria-hidden="true">2.1.</strong> Diagnostic Session Control</a></li><li class="chapter-item expanded "><a href="../02_Services/02_Control-DTC-Settings.html"><strong aria-hidden="true">2.2.</strong> Control DTC Settings</a></li><li class="chapter-item expanded "><a href="../02_Services/03_ECU-Reset.html"><strong aria-hidden="true">2.3.</strong> ECU Reset</a></li><li class="chapter-item expanded "><a href="../02_Services/04_Security-Access.html"><strong aria-hidden="true">2.4.</strong> Security Access</a></li><li class="chapter-item expanded "><a href="../02_Services/05_Read-Data-by-Identifier.html"><strong aria-hidden="true">2.5.</strong> Read Data By Identifier</a></li><li class="chapter-item expanded "><a href="../02_Services/06_Write-Data-by-Identifier.html"><strong aria-hidden="true">2.6.</strong> Write Data By Identifier</a></li><li class="chapter-item expanded "><a href="../02_Services/07_Read-Memory-by-Address.html"><strong aria-hidden="true">2.7.</strong> Read Memory by Address</a></li><li class="chapter-item expanded "><a href="../02_Services/08_Write-Memory-by-Address.html"><strong aria-hidden="true">2.8.</strong> Write Memory By Address</a></li><li class="chapter-item expanded "><a href="../02_Services/10_Tester-Present.html" class="active"><strong aria-hidden="true">2.9.</strong> Tester Present</a></li><li class="chapter-item expanded "><a href="../02_Services/11_Communication-Control.html"><strong aria-hidden="true">2.10.</strong> Communication Control</a></li><li class="chapter-item expanded "><a href="../02_Services/12_Read-Scaling-Data-by-Identifier.html"><strong aria-hidden="true">2.11.</strong> Read Scaling Data By Identifier</a></li><li class="chapter-item expanded "><a href="../02_Services/13_Request-File-Transfer.html"><strong aria-hidden="true">2.12.</strong> Request File Transfer</a></li><li class="chapter-item expanded "><a href="../02_Services/14_Request-Download.html"><strong aria-hidden="true">2.13.</strong> Request Download</a></li><li class="chapter-item expanded "><a href="../02_Services/15_Request-Upload.html"><strong aria-hidden="true">2.14.</strong> Request Upload</a></li><li class="chapter-item expanded "><a href="../02_Services/16_Request-Data-Transfer.html"><strong aria-hidden="true">2.15.</strong> Request Data Transfer</a></li><li class="chapter-item expanded "><a href="../02_Services/17_Request-Transfer-Exit.html"><strong aria-hidden="true">2.16.</strong> Request Transfer Exit</a></li><li class="chapter-item expanded "><a href="../02_Services/18_IO-Control.html"><strong aria-hidden="true">2.17.</strong> I/O Control Id and Routine Control</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Diagnostic Trouble Codes</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../03_DTC/01_Read-DTC-Information.html"><strong aria-hidden="true">3.1.</strong> Read DTC Information</a></li><li class="chapter-item expanded "><a href="../03_DTC/02_Clear-DTC-Information.html"><strong aria-hidden="true">3.2.</strong> Clear DTC Information</a></li><li class="chapter-item expanded "><a href="../03_DTC/02_Negative-Response-Codes.html"><strong aria-hidden="true">3.3.</strong> Negative Response Codes</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> CAPL</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../#.html"><strong aria-hidden="true">4.1.</strong> ...</a></li><li class="chapter-item expanded "><a href="../#.html"><strong aria-hidden="true">4.2.</strong> ...</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Q&A</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../#.html"><strong aria-hidden="true">5.1.</strong> ...</a></li><li class="chapter-item expanded "><a href="../#.html"><strong aria-hidden="true">5.2.</strong> ...</a></li></ol></li><li class="chapter-item expanded "><a href="../06_Glossary/Glossary.html"><strong aria-hidden="true">6.</strong> Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="tester-present-0x3e"><a class="header" href="#tester-present-0x3e">"Tester Present" (0x3E)</a></h2>
<h3 id="introduction"><a class="header" href="#introduction">Introduction</a></h3>
<p>The "Tester Present" service (0x3E) in Unified Diagnostic Services (UDS) is crucial for maintaining the active state of ECUs (Electronic Control Units) during diagnostic sessions. This service prevents the ECU from reverting to the default session when there's no diagnostic communication for an extended period. This is particularly useful in scenarios where the tester requires the ECU to stay in a non-default session without continuous communication from other services.</p>
<h3 id="purpose"><a class="header" href="#purpose">Purpose</a></h3>
<p>The primary purpose of the Tester Present service is to inform ECUs that a diagnostic tester is still connected and that the current diagnostic session should remain active. This service can be used in any session other than the default session.</p>
<h3 id="sub-functions"><a class="header" href="#sub-functions">Sub-functions</a></h3>
<p>The Tester Present service supports two sub-functions:</p>
<ol>
<li><strong>Zero Sub-function (0x00)</strong>: This indicates a normal Tester Present request, where the ECU is expected to send a positive response.</li>
<li><strong>Suppress Positive Response Sub-function (0x80)</strong>: This request instructs the ECU not to send a positive response, thus reducing network traffic.</li>
</ol>
<h3 id="message-format"><a class="header" href="#message-format">Message Format</a></h3>
<h4 id="request-frame"><a class="header" href="#request-frame">Request Frame</a></h4>
<p>The Tester Present request message consists of the following:</p>
<ol>
<li><strong>Service ID (1 byte)</strong>: 0x3E</li>
<li><strong>Sub-function (1 byte)</strong>: 0x00 or 0x80</li>
</ol>
<h4 id="positive-response-frame"><a class="header" href="#positive-response-frame">Positive Response Frame</a></h4>
<p>When a positive response is expected, the ECU responds with:</p>
<ol>
<li><strong>Service ID (1 byte)</strong>: 0x3E</li>
<li><strong>Sub-function (1 byte)</strong>: 0x00 or 0x80</li>
</ol>
<h4 id="negative-response-frame"><a class="header" href="#negative-response-frame">Negative Response Frame</a></h4>
<p>If there's an issue with the request, the ECU sends a negative response:</p>
<ol>
<li><strong>Negative Response Code (1 byte)</strong>: 0x7F</li>
<li><strong>Service ID (1 byte)</strong>: 0x3E</li>
<li><strong>NRC Code (1 byte)</strong>: Specific error code</li>
</ol>
<h3 id="negative-response-codes-nrc"><a class="header" href="#negative-response-codes-nrc">Negative Response Codes (NRC)</a></h3>
<ul>
<li><strong>0x12 (Sub-function Not Supported)</strong>: Indicates that the sub-function requested is not supported by the ECU.</li>
<li><strong>0x13 (Incorrect Message Length)</strong>: Indicates that the message length is incorrect.</li>
</ul>
<h3 id="usage-scenario"><a class="header" href="#usage-scenario">Usage Scenario</a></h3>
<p>Consider a scenario where a tester needs the ECU to stay in an extended diagnostic session for an extended period, perhaps to perform routine control or security access tasks. During these periods, there might be no continuous communication. The Tester Present service (0x3E) is used to ensure the ECU remains in the non-default session.</p>
<h3 id="detailed-sub-function-explanation"><a class="header" href="#detailed-sub-function-explanation">Detailed Sub-function Explanation</a></h3>
<ul>
<li>
<p><strong>Zero Sub-function (0x00)</strong>:</p>
<ul>
<li>Sent by the tester to indicate a normal request.</li>
<li>The ECU responds positively unless otherwise instructed.</li>
</ul>
</li>
<li>
<p><strong>Suppress Positive Response (0x80)</strong>:</p>
<ul>
<li>Sent by the tester to suppress the positive response.</li>
<li>This helps in reducing network traffic and can be used when the tester does not require an acknowledgment.</li>
</ul>
</li>
</ul>
<h3 id="sequence-diagram"><a class="header" href="#sequence-diagram">Sequence Diagram</a></h3>
<p>Below is a sequence diagram illustrating the interaction between the tester and the ECU using the Tester Present service:</p>
<pre><code class="language-plantuml">@startuml
actor Tester
participant ECU

Tester -&gt; ECU: Tester Present Request (0x3E, 0x00)
alt Positive Response Expected
    ECU --&gt; Tester: Positive Response (0x3E, 0x00)
else Suppress Positive Response
    Tester -&gt; ECU: Tester Present Request (0x3E, 0x80)
    note right of ECU: No Response Sent
end
Tester -&gt; ECU: Another Diagnostic Request
alt Incorrect Message Length
    ECU --&gt; Tester: Negative Response (0x7F, 0x3E, 0x13)
else Sub-function Not Supported
    ECU --&gt; Tester: Negative Response (0x7F, 0x3E, 0x12)
end
@enduml
</code></pre>
<h3 id="practical-example"><a class="header" href="#practical-example">Practical Example</a></h3>
<h4 id="scenario-wiper-motor-timer-adjustment"><a class="header" href="#scenario-wiper-motor-timer-adjustment">Scenario: Wiper Motor Timer Adjustment</a></h4>
<p>In a practical example, consider an ECU managing a wiper motor that requires the adjustment of a 555 Timer IC. This adjustment can only be performed in an extended diagnostic session. The Tester Present service is used to ensure that the ECU remains in the extended session while the adjustment routine is carried out, even if there's no continuous communication from other services.</p>
<h3 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h3>
<p>The Tester Present (0x3E) service is a vital part of UDS, ensuring that ECUs remain in the required diagnostic session. Understanding how to use its sub-functions effectively can help maintain stable communication and diagnostic processes, especially during extended diagnostic operations.</p>
<p>By implementing the Tester Present service correctly, diagnostic tools can keep ECUs in the desired session, avoiding unnecessary resets and ensuring smooth and continuous diagnostic procedures.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../02_Services/08_Write-Memory-by-Address.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../02_Services/11_Communication-Control.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../02_Services/08_Write-Memory-by-Address.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../02_Services/11_Communication-Control.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
