<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Unified Diagnostic Services</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="01_UDS/01_Introduction.html"><strong aria-hidden="true">1.1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="01_UDS/02_Terms.html"><strong aria-hidden="true">1.2.</strong> Terms</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Services</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="02_Services/01_Diagnostic-Sessions-Control.html"><strong aria-hidden="true">2.1.</strong> Diagnostic Session Control</a></li><li class="chapter-item expanded "><a href="02_Services/02_Control-DTC-Settings.html"><strong aria-hidden="true">2.2.</strong> Control DTC Settings</a></li><li class="chapter-item expanded "><a href="02_Services/03_ECU-Reset.html"><strong aria-hidden="true">2.3.</strong> ECU Reset</a></li><li class="chapter-item expanded "><a href="02_Services/04_Security-Access.html"><strong aria-hidden="true">2.4.</strong> Security Access</a></li><li class="chapter-item expanded "><a href="02_Services/05_Read-Data-by-Identifier.html"><strong aria-hidden="true">2.5.</strong> Read Data By Identifier</a></li><li class="chapter-item expanded "><a href="02_Services/06_Write-Data-by-Identifier.html"><strong aria-hidden="true">2.6.</strong> Write Data By Identifier</a></li><li class="chapter-item expanded "><a href="02_Services/07_Read-Memory-by-Address.html"><strong aria-hidden="true">2.7.</strong> Read Memory by Address</a></li><li class="chapter-item expanded "><a href="02_Services/08_Write-Memory-by-Address.html"><strong aria-hidden="true">2.8.</strong> Write Memory By Address</a></li><li class="chapter-item expanded "><a href="02_Services/10_Tester-Present.html"><strong aria-hidden="true">2.9.</strong> Tester Present</a></li><li class="chapter-item expanded "><a href="02_Services/11_Communication-Control.html"><strong aria-hidden="true">2.10.</strong> Communication Control</a></li><li class="chapter-item expanded "><a href="02_Services/12_Read-Scaling-Data-by-Identifier.html"><strong aria-hidden="true">2.11.</strong> Read Scaling Data By Identifier</a></li><li class="chapter-item expanded "><a href="02_Services/13_Request-File-Transfer.html"><strong aria-hidden="true">2.12.</strong> Request File Transfer</a></li><li class="chapter-item expanded "><a href="02_Services/14_Request-Download.html"><strong aria-hidden="true">2.13.</strong> Request Download</a></li><li class="chapter-item expanded "><a href="02_Services/15_Request-Upload.html"><strong aria-hidden="true">2.14.</strong> Request Upload</a></li><li class="chapter-item expanded "><a href="02_Services/16_Request-Data-Transfer.html"><strong aria-hidden="true">2.15.</strong> Request Data Transfer</a></li><li class="chapter-item expanded "><a href="02_Services/17_Request-Transfer-Exit.html"><strong aria-hidden="true">2.16.</strong> Request Transfer Exit</a></li><li class="chapter-item expanded "><a href="02_Services/18_IO-Control.html"><strong aria-hidden="true">2.17.</strong> I/O Control Id and Routine Control</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Diagnostic Trouble Codes</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="03_DTC/01_Read-DTC-Information.html"><strong aria-hidden="true">3.1.</strong> Read DTC Information</a></li><li class="chapter-item expanded "><a href="03_DTC/02_Clear-DTC-Information.html"><strong aria-hidden="true">3.2.</strong> Clear DTC Information</a></li><li class="chapter-item expanded "><a href="03_DTC/02_Negative-Response-Codes.html"><strong aria-hidden="true">3.3.</strong> Negative Response Codes</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> CAPL</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="#.html"><strong aria-hidden="true">4.1.</strong> ...</a></li><li class="chapter-item expanded "><a href="#.html"><strong aria-hidden="true">4.2.</strong> ...</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Q&A</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="#.html"><strong aria-hidden="true">5.1.</strong> ...</a></li><li class="chapter-item expanded "><a href="#.html"><strong aria-hidden="true">5.2.</strong> ...</a></li></ol></li><li class="chapter-item expanded "><a href="06_Glossary/Glossary.html"><strong aria-hidden="true">6.</strong> Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div style="break-before: page; page-break-before: always;"></div><h1 id="unified-diagnostic-services-uds"><a class="header" href="#unified-diagnostic-services-uds">Unified Diagnostic Services (UDS)</a></h1>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>Welcome to the detailed course on Unified Diagnostics Service (UDS). This session will provide an in-depth understanding of UDS, its importance in modern vehicle diagnostics, and how it functions.</p>
<h2 id="what-is-unified-diagnostic-services-uds"><a class="header" href="#what-is-unified-diagnostic-services-uds">What is Unified Diagnostic Services (UDS)?</a></h2>
<p>Unified Diagnostic Services (UDS) is a standardized communication protocol defined by the ISO 14229 standard. It is used for diagnosing and reprogramming automotive ECUs (Electronic Control Units). UDS standardizes the communication between diagnostic tools and ECUs, ensuring consistent and accurate diagnostic processes.</p>
<h2 id="importance-of-uds"><a class="header" href="#importance-of-uds">Importance of UDS</a></h2>
<ol>
<li><strong>Standardization:</strong>
<ul>
<li>UDS provides a uniform protocol that all vehicle manufacturers and diagnostic tool providers follow, ensuring compatibility and reliability.</li>
</ul>
</li>
<li><strong>Accuracy:</strong>
<ul>
<li>Allows precise identification of issues and their root causes.</li>
</ul>
</li>
<li><strong>Safety:</strong>
<ul>
<li>Ensures that diagnostic procedures do not interfere with the vehicle's normal operations, enhancing safety.</li>
</ul>
</li>
<li><strong>Efficiency:</strong>
<ul>
<li>Reduces diagnostic time and increases the efficiency of repair and maintenance processes.</li>
</ul>
</li>
</ol>
<h2 id="uds-communication-model"><a class="header" href="#uds-communication-model">UDS Communication Model</a></h2>
<p>The UDS communication model involves a client-server architecture:</p>
<ul>
<li><strong>Client (Tester):</strong>
<ul>
<li>The diagnostic tool or software that sends requests to the ECU.</li>
</ul>
</li>
<li><strong>Server (ECU):</strong>
<ul>
<li>The vehicle’s control unit that receives requests and sends responses.</li>
</ul>
</li>
</ul>
<h2 id="uds-services"><a class="header" href="#uds-services">UDS Services</a></h2>
<p>UDS defines a range of diagnostic services, each identified by a unique Service ID. These services are categorized based on their functionality:</p>
<ol>
<li>
<p><strong>Diagnostic and Communication Management (Service IDs: 0x10 - 0x1F):</strong></p>
<ul>
<li><strong>0x10: Diagnostic Session Control</strong>
<ul>
<li>Initiates a diagnostic session in the ECU.</li>
</ul>
</li>
<li><strong>0x11: ECU Reset</strong>
<ul>
<li>Resets the ECU.</li>
</ul>
</li>
<li><strong>0x14: Clear Diagnostic Information</strong>
<ul>
<li>Clears stored diagnostic trouble codes (DTCs).</li>
</ul>
</li>
<li><strong>0x19: Read DTC Information</strong>
<ul>
<li>Reads diagnostic trouble codes.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Data Transmission (Service IDs: 0x20 - 0x3F):</strong></p>
<ul>
<li><strong>0x22: Read Data by Identifier</strong>
<ul>
<li>Reads data from the ECU based on a specific identifier.</li>
</ul>
</li>
<li><strong>0x23: Read Memory by Address</strong>
<ul>
<li>Reads data from a specified memory address.</li>
</ul>
</li>
<li><strong>0x24: Read Scaling Data by Identifier</strong>
<ul>
<li>Reads scaling data for specified parameters.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Stored Data Transmission (Service IDs: 0x40 - 0x5F):</strong></p>
<ul>
<li><strong>0x2A: Read Data by Periodic Identifier</strong>
<ul>
<li>Periodically reads data from the ECU.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Input/Output Control (Service IDs: 0x60 - 0x7F):</strong></p>
<ul>
<li><strong>0x2C: Dynamically Define Data Identifier</strong>
<ul>
<li>Defines custom data identifiers for specific diagnostic purposes.</li>
</ul>
</li>
<li><strong>0x2E: Write Data by Identifier</strong>
<ul>
<li>Writes data to the ECU based on a specific identifier.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Remote Activation of Routine (Service IDs: 0x80 - 0x9F):</strong></p>
<ul>
<li><strong>0x31: Routine Control</strong>
<ul>
<li>Controls routines in the ECU, such as self-tests or calibrations.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Upload/Download (Service IDs: 0xA0 - 0xBF):</strong></p>
<ul>
<li><strong>0x34: Request Download</strong>
<ul>
<li>Initiates a download of new data or software to the ECU.</li>
</ul>
</li>
<li><strong>0x35: Request Upload</strong>
<ul>
<li>Initiates an upload of data from the ECU.</li>
</ul>
</li>
<li><strong>0x36: Transfer Data</strong>
<ul>
<li>Transfers data during an upload or download process.</li>
</ul>
</li>
<li><strong>0x37: Request Transfer Exit</strong>
<ul>
<li>Concludes the data transfer process.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="uds-service-structure"><a class="header" href="#uds-service-structure">UDS Service Structure</a></h2>
<p>Each UDS service request consists of:</p>
<ol>
<li><strong>Service ID:</strong>
<ul>
<li>A unique identifier for the service (e.g., 0x10 for Diagnostic Session Control).</li>
</ul>
</li>
<li><strong>Sub-Function:</strong>
<ul>
<li>Specifies the particular function or operation within the service.</li>
</ul>
</li>
<li><strong>Data Parameters:</strong>
<ul>
<li>Additional data required for the service request.</li>
</ul>
</li>
</ol>
<p>For example, a request to read data by identifier (Service ID 0x22) may look like this:</p>
<ul>
<li><strong>Request:</strong> 0x22 0xF1 0x90
<ul>
<li>0x22: Service ID for Read Data by Identifier.</li>
<li>0xF1 0x90: Identifier for the specific data to be read.</li>
</ul>
</li>
</ul>
<h2 id="example-diagnostic-session-control-service-id-0x10"><a class="header" href="#example-diagnostic-session-control-service-id-0x10">Example: Diagnostic Session Control (Service ID: 0x10)</a></h2>
<ol>
<li><strong>Start Diagnostic Session:</strong>
<ul>
<li><strong>Request:</strong> 0x10 0x01
<ul>
<li>0x10: Service ID for Diagnostic Session Control.</li>
<li>0x01: Sub-function to start the default diagnostic session.</li>
</ul>
</li>
<li><strong>Response:</strong> 0x50 0x01
<ul>
<li>0x50: Positive response for Diagnostic Session Control.</li>
<li>0x01: Echoes the sub-function.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="example-reading-dtc-information-service-id-0x19"><a class="header" href="#example-reading-dtc-information-service-id-0x19">Example: Reading DTC Information (Service ID: 0x19)</a></h2>
<ol>
<li><strong>Read All DTCs:</strong>
<ul>
<li><strong>Request:</strong> 0x19 0x02
<ul>
<li>0x19: Service ID for Read DTC Information.</li>
<li>0x02: Sub-function to read all DTCs.</li>
</ul>
</li>
<li><strong>Response:</strong> 0x59 0x02 [DTC Data]
<ul>
<li>0x59: Positive response for Read DTC Information.</li>
<li>0x02: Echoes the sub-function.</li>
<li>[DTC Data]: List of DTCs retrieved from the ECU.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="error-handling-in-uds"><a class="header" href="#error-handling-in-uds">Error Handling in UDS</a></h2>
<p>UDS uses Negative Response Codes (NRCs) to indicate errors or issues with requests. Common NRCs include:</p>
<ul>
<li><strong>0x11: Service Not Supported</strong>
<ul>
<li>The requested service is not supported by the ECU.</li>
</ul>
</li>
<li><strong>0x13: Incorrect Message Length or Invalid Format</strong>
<ul>
<li>The request message length or format is incorrect.</li>
</ul>
</li>
<li><strong>0x22: Conditions Not Correct</strong>
<ul>
<li>The ECU conditions are not suitable for the requested service.</li>
</ul>
</li>
<li><strong>0x31: Request Out of Range</strong>
<ul>
<li>The request is out of the allowable range.</li>
</ul>
</li>
</ul>
<h2 id="practical-application-of-uds"><a class="header" href="#practical-application-of-uds">Practical Application of UDS</a></h2>
<p>UDS is crucial for modern automotive diagnostics and maintenance. Technicians use UDS-compatible diagnostic tools to:</p>
<ol>
<li><strong>Identify Issues:</strong>
<ul>
<li>Retrieve DTCs and understand the problems within various ECUs.</li>
</ul>
</li>
<li><strong>Perform Repairs:</strong>
<ul>
<li>Use the diagnostic data to repair or replace faulty components.</li>
</ul>
</li>
<li><strong>Ensure Safety:</strong>
<ul>
<li>Verify that safety-critical systems like airbags and braking systems are functioning correctly.</li>
</ul>
</li>
<li><strong>Update Software:</strong>
<ul>
<li>Flash new software or update existing software in the ECUs.</li>
</ul>
</li>
<li><strong>Maintain Performance:</strong>
<ul>
<li>Perform routine checks and calibrations to maintain vehicle performance.</li>
</ul>
</li>
</ol>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>Unified Diagnostic Services (UDS) represents a standardized approach to vehicle diagnostics, enabling precise, efficient, and safe maintenance of modern vehicles. By understanding and applying UDS protocols, technicians can ensure the reliability and performance of automotive systems.</p>
<p>In the following sessions, we will explore each UDS service in detail, provide practical examples, and discuss common use cases in vehicle diagnostics. Stay tuned and feel free to leave any questions or comments for further clarification. See you in the next video!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="diagnostic-session-control-0x11"><a class="header" href="#diagnostic-session-control-0x11">Diagnostic Session Control (0x11)</a></h1>
<h2 id="1-purpose"><a class="header" href="#1-purpose">1. Purpose</a></h2>
<p>The purpose of the Diagnostics Session Control service (0x11) within Unified Diagnostic Services (UDS) is to facilitate the switching between different diagnostic sessions. Diagnostic sessions represent distinct operating states or modes within the diagnostic system. This service allows for the transition from one session to another based on various criteria such as standards, recommendations, OEM specifications, or specific requirements of the vehicle manufacturer or system supplier.</p>
<h2 id="2-short-description"><a class="header" href="#2-short-description">2. Short Description</a></h2>
<p>The Diagnostics Session Control service enables the management of diagnostic sessions, ensuring that only one session is active at any given time. It ensures adherence to timing parameters and allows for seamless transition between sessions as per the diagnostic requirements.</p>
<h2 id="3-sub-functions-supported"><a class="header" href="#3-sub-functions-supported">3. Sub-functions Supported</a></h2>
<p>The primary sub-function supported by Diagnostics Session Control service includes switching between different diagnostic sessions.</p>
<h2 id="4-detailed-description"><a class="header" href="#4-detailed-description">4. Detailed Description</a></h2>
<p>The Diagnostics Session Control service is a vital component of UDS, operating at the data link layer (Layer 2) of the OSI model. It governs the timing parameters associated with diagnostic sessions, ensuring proper communication between the tester (diagnostic tool) and the server (ECU or Electronic Control Unit).</p>
<ul>
<li><strong>Single Active Session</strong>: Only one diagnostic session can be active at any given time. Upon power-up, if no other session is explicitly enabled, the server defaults to a predetermined session.</li>
<li><strong>Diagnostic Functionality</strong>: The ECU is required to maintain diagnostic functionality under normal operating conditions as well as under other defined operating conditions, which may vary based on the specifications provided by the vehicle manufacturer, system supplier, or other relevant entities.</li>
<li><strong>Handling of Session Requests</strong>: When a tester requests a specific diagnostic session (e.g., 01, 02, 03, or 04), the server checks if the requested session is already active. If the requested session is currently running, the server sends a positive response message and continues to operate according to the characteristics of the active session.</li>
<li><strong>Transitioning between Sessions</strong>: Upon receiving a request for a new diagnostic session, the server ensures a seamless transition by sending a positive response message before the timings of the new session become active within the server. This preemptive response ensures that the tester can begin communication with the new session without delays.</li>
</ul>
<h2 id="5-request-message-frame"><a class="header" href="#5-request-message-frame">5. Request Message Frame</a></h2>
<p>The request message frame for the Diagnostics Session Control service typically includes the service identifier (0x11) along with any additional parameters specifying the desired diagnostic session.</p>
<h2 id="6-positive-response-message-frame"><a class="header" href="#6-positive-response-message-frame">6. Positive Response Message Frame</a></h2>
<p>The positive response message frame acknowledges successful execution of the requested service, confirming the transition to the specified diagnostic session.</p>
<h2 id="7-supported-nrcs-negative-response-codes"><a class="header" href="#7-supported-nrcs-negative-response-codes">7. Supported NRC’s (Negative Response Codes)</a></h2>
<p>While the Diagnostics Session Control service aims for seamless session transitions, certain conditions may prevent its execution. In such cases, the server may issue Negative Response Codes (NRCs) to indicate the reason for the failure.</p>
<h2 id="8-negative-response-frame"><a class="header" href="#8-negative-response-frame">8. Negative Response Frame</a></h2>
<p>The negative response frame is sent by the server to indicate a failure or rejection of the requested service. It includes an NRC indicating the specific issue encountered during the attempt to switch sessions.</p>
<h3 id="sub-function-description"><a class="header" href="#sub-function-description">Sub-function Description</a></h3>
<ul>
<li><strong>00 Reserved</strong>: This sub-function code is reserved and not assigned to any specific diagnostic session.</li>
<li><strong>01 Default Session</strong>: The default session represents the standard operational mode of the diagnostic system. It typically encompasses basic diagnostic functionalities required for routine maintenance and troubleshooting.</li>
<li><strong>02 Programming Session</strong>: The programming session is dedicated to activities related to ECU programming or reprogramming. It provides access to functions necessary for updating firmware, calibration data, or configuration parameters within the electronic control units.</li>
<li><strong>03 Extended Diagnostic Session</strong>: The extended diagnostic session offers an expanded set of diagnostic capabilities beyond those available in the default session. It may include advanced diagnostic tests, parameter monitoring, or configuration options not accessible in other sessions.</li>
<li><strong>04 Safety System Diagnostic Session</strong>: This session is specifically designed for diagnosing safety-critical systems within the vehicle, such as airbag systems, anti-lock braking systems (ABS), or electronic stability control (ESC) systems. It prioritizes the identification and resolution of issues affecting the safety of vehicle occupants.</li>
<li><strong>05-3F Reserved</strong>: These sub-function codes are reserved for future allocation and currently not assigned to any specific diagnostic sessions.</li>
<li><strong>40-5F Vehicle Manufacturer Specific</strong>: Sub-function codes in this range are reserved for diagnostic sessions defined by individual vehicle manufacturers. Each manufacturer may utilize these codes to implement custom diagnostic sessions tailored to their specific vehicle models or system requirements.</li>
<li><strong>60-7E System Supplier Specific</strong>: Similar to the manufacturer-specific codes, sub-function codes in this range are reserved for diagnostic sessions defined by system suppliers or component manufacturers. These sessions may cater to specialized diagnostic needs associated with particular vehicle subsystems or components.</li>
<li><strong>7F Reserved</strong>: This sub-function code is reserved and not assigned to any specific diagnostic session.</li>
</ul>
<p>These sub-function descriptions provide a comprehensive overview of the different diagnostic sessions supported by the Diagnostics Session Control service. Each session serves distinct purposes and may offer unique diagnostic functionalities tailored to specific vehicle systems, manufacturer preferences, or component requirements. By supporting a diverse range of sessions, UDS enables comprehensive diagnostic capabilities across various vehicles and system configurations.</p>
<h2 id="transitions"><a class="header" href="#transitions">Transitions</a></h2>
<p>Unified Diagnostic Services (UDS) is a diagnostic communication protocol used in automotive electronics to provide secure, standardized, and reliable communication between a vehicle's electronic control units (ECUs) and a diagnostic tester. UDS defines a set of services, parameters, and communication protocols for diagnostic purposes. Diagnostic sessions are fundamental to the UDS protocol. They represent different states of communication between the diagnostic tester (client) and the vehicle's ECUs (server). Session control governs the transition between these states, ensuring efficient and effective diagnostic communication.</p>
<p><strong>1. Session States:</strong></p>
<p>UDS defines several session states, each with its specific characteristics and functionalities. The primary session states are:</p>
<ul>
<li>Default Session: The initial session state established when the communication between the diagnostic tester and the vehicle begins. In this state, the diagnostic services are available for basic diagnostic functions.</li>
<li>Non-Default Session: Any session state other than the default session. Non-default sessions provide access to advanced diagnostic functions and may have additional security or functionality requirements.</li>
</ul>
<p><strong>2. Session Transition Rules:</strong></p>
<p>UDS specifies rules for transitioning between session states to ensure consistent behavior and maintain the integrity of diagnostic communication. These transition rules are crucial for managing the state of the diagnostic session effectively. Key transition rules include:</p>
<p><strong>Transition from Default Session to Default Session:</strong></p>
<ul>
<li>When the server is in the default session and the client requests to start another default session, the server shall completely re-initialize the default session. However, this re-initialization process shall not impact Non-Volatile Memory (NVM) settings.</li>
</ul>
<p><strong>Transition from Default Session to Non-Default Session:</strong></p>
<ul>
<li>When the server transitions from the default session to any non-default session, it shall reset only the events that have been configured in the server. Other parameters and settings, including NVM settings, shall remain unaffected.</li>
</ul>
<p><strong>Transition between Non-Default Sessions:</strong></p>
<ul>
<li>When transitioning from one non-default session to another, or the same non-default session, any configured periodic scheduler shall remain active. Additionally, the states of the Communication Control and Control DTC Setting services shall not be affected. For instance, if normal communication is disabled at the time of session switch, it shall remain disabled in the new session state.</li>
</ul>
<p><strong>3. Impact on Services and Parameters:</strong></p>
<p>It's essential to understand the impact of session transitions on various services and parameters within the UDS protocol. While session transitions may reset certain events or settings, they should not affect the overall functionality of diagnostic services. Key considerations include:</p>
<ul>
<li>NVM Settings: Session transitions should not impact Non-Volatile Memory settings, ensuring that critical configuration data remains intact across sessions.</li>
<li>Communication Control: The state of communication control services, such as normal communication or specific communication modes, should remain consistent across session transitions to maintain communication integrity.</li>
<li>Control DTC Setting: Similarly, the settings related to Diagnostic Trouble Code (DTC) handling and reporting should persist across session transitions to ensure accurate diagnostic information.</li>
</ul>
<h2 id="valid-request-and-positive-responses"><a class="header" href="#valid-request-and-positive-responses">Valid Request and Positive Responses</a></h2>
<h3 id="default-session"><a class="header" href="#default-session">Default Session</a></h3>
<pre><code class="language-plantuml">
@startuml

title Valid Request and Positive Responses - Default Session

actor User
participant "Controller" as Controller
participant "Service" as Service
participant "Database" as Database

User -&gt; Controller: Make Request
activate Controller
Controller -&gt; Service: Process Request
activate Service
Service -&gt; Database: Query Data
activate Database
Database --&gt; Service: Return Data
deactivate Database
Service --&gt; Controller: Return Response
deactivate Service
Controller --&gt; User: Send Response
deactivate Controller

@enduml
</code></pre>
<h3 id="programming-session"><a class="header" href="#programming-session">Programming Session</a></h3>
<pre><code class="language-plantuml">
@startuml

title Valid Request and Positive Responses - Programming Session

actor User
participant "Controller" as Controller
participant "Service" as Service
participant "External System" as ExternalSystem

User -&gt; Controller: Make Request
activate Controller
Controller -&gt; Service: Process Request
activate Service
Service -&gt; ExternalSystem: Execute Programming Session
activate ExternalSystem
ExternalSystem --&gt; Service: Return Result
deactivate ExternalSystem
Service --&gt; Controller: Return Response
deactivate Service
Controller --&gt; User: Send Response
deactivate Controller

@enduml
</code></pre>
<h3 id="extended-session"><a class="header" href="#extended-session">Extended Session</a></h3>
<pre><code class="language-plantuml">
@startuml

title Valid Request and Positive Responses - Extended Session

actor User
participant "Controller" as Controller
participant "Service" as Service
participant "External System" as ExternalSystem

User -&gt; Controller: Make Request
activate Controller
Controller -&gt; Service: Process Request
activate Service
Service -&gt; ExternalSystem: Execute Extended Session
activate ExternalSystem
ExternalSystem --&gt; Service: Return Result
deactivate ExternalSystem
Service --&gt; Controller: Return Response
deactivate Service
Controller --&gt; User: Send Response
deactivate Controller

@enduml
</code></pre>
<h3 id="safety-session"><a class="header" href="#safety-session">Safety Session</a></h3>
<pre><code class="language-plantuml">
@startuml

title Valid Request and Positive Responses - Safety Session

actor User
participant "Controller" as Controller
participant "Service" as Service
participant "Safety System" as SafetySystem

User -&gt; Controller: Make Request
activate Controller
Controller -&gt; Service: Process Request
activate Service
Service -&gt; SafetySystem: Execute Safety Session
activate SafetySystem
SafetySystem --&gt; Service: Return Result
deactivate SafetySystem
Service --&gt; Controller: Return Response
deactivate Service
Controller --&gt; User: Send Response
deactivate Controller

@enduml
</code></pre>
<h2 id="invalid-request-and-negative-response"><a class="header" href="#invalid-request-and-negative-response">Invalid Request and Negative Response</a></h2>
<h3 id="nrc-12---sub-function-not-supported"><a class="header" href="#nrc-12---sub-function-not-supported">NRC 12 - Sub-Function Not Supported</a></h3>
<pre><code class="language-plantuml">
@startuml

title Invalid Request and Negative Response - NRC 12: Sub-Function Not Supported

actor User
participant "Controller" as Controller
participant "Service" as Service

User -&gt; Controller: Make Request
activate Controller
Controller -&gt; Service: Process Request
activate Service
Service --&gt; Controller: Sub-Function Not Supported
deactivate Service
Controller --&gt; User: Send Negative Response
deactivate Controller

@enduml
</code></pre>
<h3 id="nrc-13---incorrect-length"><a class="header" href="#nrc-13---incorrect-length">NRC 13 - Incorrect Length</a></h3>
<pre><code class="language-plantuml">
@startuml

title Invalid Request and Negative Response - NRC 13: Incorrect Length

actor User
participant "Controller" as Controller
participant "Service" as Service

User -&gt; Controller: Make Request
activate Controller
Controller -&gt; Service: Process Request
activate Service
Service --&gt; Controller: Incorrect Length
deactivate Service
Controller --&gt; User: Send Negative Response
deactivate Controller

@enduml
</code></pre>
<h3 id="nrc-22-conditions-not-correct"><a class="header" href="#nrc-22-conditions-not-correct">NRC 22: Conditions Not Correct</a></h3>
<pre><code class="language-plantuml">
@startuml

title Invalid Request and Negative Response - NRC 22: Conditions Not Correct

actor User
participant "Controller" as Controller
participant "Service" as Service

User -&gt; Controller: Make Request
activate Controller
Controller -&gt; Service: Process Request
activate Service
Service --&gt; Controller: Conditions Not Correct
deactivate Service
Controller --&gt; User: Send Negative Response
deactivate Controller

@enduml
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="control-dtc-setting"><a class="header" href="#control-dtc-setting">Control DTC Setting</a></h1>
<p><strong>Introduction</strong></p>
<p>The Control DTC Setting (0x85) service plays a pivotal role in the diagnostic ecosystem, offering testers the capability to manage Diagnostic Trouble Codes (DTCs) status bits within an Electronic Control Unit (ECU). By wielding this service, testers gain the power to suspend or resume the updating of DTC status bits, thus exerting precise control over diagnostic procedures. Mastery of this service is indispensable for optimizing diagnostics and maintenance workflows.</p>
<p><strong>Purpose</strong></p>
<p>The primary objective of the Control DTC Setting service is to empower testers with the ability to halt or recommence the setting of DTC status bits within the ECU. This control over the update process ensures that diagnostic operations unfold with precision, enhancing the accuracy of fault detection mechanisms.</p>
<p><strong>Sub-functions</strong></p>
<p>The Control DTC Setting service encompasses two distinct sub-functions:</p>
<ol>
<li><strong>On (0x01):</strong> This sub-function commands the ECU to resume updating trouble code status bits in the server's memory.</li>
<li><strong>Off (0x02):</strong> Conversely, this sub-function directs the ECU to cease updating trouble code status bits in the server's memory.</li>
</ol>
<p><strong>Request Frame</strong></p>
<p>When initiating a request to control DTC setting, the following frame structure is adhered to:</p>
<ol>
<li><strong>Service Id:</strong> This field delineates the service identifier (0x85).</li>
<li><strong>Sub-function:</strong> Signifying the type of DTC setting operation to be executed (Resume or Stop).</li>
<li><strong>DTC Setting Control Option Record:</strong> This optional data payload allows the tester to specify particular DTCs to be toggled on or off.</li>
</ol>
<p><strong>Positive Response Frame</strong></p>
<p>Upon successful execution of the request, the ECU dispatches a positive response comprising:</p>
<ol>
<li><strong>Service Id:</strong> Identifying the service (0x85).</li>
<li><strong>Sub-function:</strong> Validating the type of DTC setting operation executed (Resume or Stop).</li>
<li><strong>DTC Setting Control Option Record:</strong> Furnishing optional intelligence regarding the controlled DTCs.</li>
</ol>
<p><strong>Negative Response Frame</strong></p>
<p>Should the requested operation be unfeasible, the ECU issues a negative response, inclusive of:</p>
<ol>
<li><strong>Negative Response (7F):</strong> Indicating a negative response.</li>
<li><strong>Service Id:</strong> Specifying the service (0x85).</li>
<li><strong>NRC Code:</strong> Detailing the rationale behind the rejection or failure.</li>
</ol>
<p><strong>Circumstances for Resume Operation</strong></p>
<p>The resumption of setting trouble codes into the server's memory may occur under the following circumstances:</p>
<ol>
<li><strong>Sub-function (DTC Setting Type: Resume):</strong> Triggered when the tester solicits a resume operation.</li>
<li><strong>ECU Reset:</strong> Following an ECU reset, the setting of trouble codes may automatically resume as part of the initialization process.</li>
<li><strong>Session Transition:</strong> In scenarios where the session transition does not accommodate service (0x85), the ECU may autonomously resume DTC setting.</li>
<li><strong>Clear DTC Information:</strong> The act of clearing DTC information might serve as a catalyst for the resumption of trouble code setting, especially if previously suspended.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h2 id="comprehensive-tutorial-on-ecu-reset-0x11-service"><a class="header" href="#comprehensive-tutorial-on-ecu-reset-0x11-service">Comprehensive Tutorial on ECU Reset (0x11) Service</a></h2>
<h3 id="introduction-1"><a class="header" href="#introduction-1">Introduction</a></h3>
<p>The Electronic Control Unit (ECU) Reset service (0x11) is a critical diagnostic service used to restart the ECU. This service ensures that the ECU can be reset in a controlled manner, allowing for proper initialization of the system. The ECU sends a positive response to the tester before the reset is executed. After a successful reset, the ECU activates the default session. During the reset process, the ECU does not accept any other request messages or send any response messages.</p>
<h3 id="sub-functions-of-ecu-reset"><a class="header" href="#sub-functions-of-ecu-reset">Sub-functions of ECU Reset</a></h3>
<p>The ECU Reset service supports various sub-functions, each identified by an enum value:</p>
<div class="table-wrapper"><table><thead><tr><th>Enum Value</th><th>Description</th></tr></thead><tbody>
<tr><td>0x00</td><td>SAE Reserved</td></tr>
<tr><td>0x01</td><td>Hard Reset</td></tr>
<tr><td>0x02</td><td>Key Off On Reset</td></tr>
<tr><td>0x03</td><td>Soft Reset</td></tr>
<tr><td>0x04</td><td>Enable Rapid Power Shut Down</td></tr>
<tr><td>0x05</td><td>Disable Rapid Power Shut Down</td></tr>
<tr><td>0x06-0x3F</td><td>ISO SAE Reserved</td></tr>
<tr><td>0x40-0x5F</td><td>OEM Specific</td></tr>
<tr><td>0x60-0x7E</td><td>Supplier Specific</td></tr>
<tr><td>0x7F</td><td>SAE Reserved</td></tr>
</tbody></table>
</div>
<h3 id="request-and-response-frames"><a class="header" href="#request-and-response-frames">Request and Response Frames</a></h3>
<ul>
<li>
<p><strong>Request Frame:</strong></p>
<ol>
<li>Service Id (0x11)</li>
<li>Sub-function (Reset)</li>
</ol>
</li>
<li>
<p><strong>Positive Response Frame:</strong></p>
<ol>
<li>Service Id (0x51)</li>
<li>Sub-function (Reset)</li>
</ol>
</li>
<li>
<p><strong>Negative Response Frame:</strong></p>
<ol>
<li>Negative Response (0x7F)</li>
<li>Service Id (0x11)</li>
<li>NRC Code</li>
</ol>
</li>
</ul>
<h3 id="sub-function-details"><a class="header" href="#sub-function-details">Sub-function Details</a></h3>
<h4 id="1-hard-reset-0x01"><a class="header" href="#1-hard-reset-0x01">1. Hard Reset (0x01)</a></h4>
<ul>
<li>Simulates a power-on or start-up condition.</li>
<li>Resets both volatile and non-volatile memory.</li>
<li>Used when the ECU needs to reinitialize all components.</li>
</ul>
<h4 id="2-key-off-on-reset-0x02"><a class="header" href="#2-key-off-on-reset-0x02">2. Key Off On Reset (0x02)</a></h4>
<ul>
<li>Simulates the driver turning the ignition key off and back on.</li>
<li>Typically preserves non-volatile memory and initializes volatile memory.</li>
<li>The specific implementation may vary.</li>
</ul>
<h4 id="3-soft-reset-0x03"><a class="header" href="#3-soft-reset-0x03">3. Soft Reset (0x03)</a></h4>
<ul>
<li>Restarts the application without reinitializing previously learned data.</li>
<li>Typically used to restart the software while maintaining adaptive data.</li>
</ul>
<h4 id="4-enable-rapid-power-shut-down-0x04"><a class="header" href="#4-enable-rapid-power-shut-down-0x04">4. Enable Rapid Power Shut Down (0x04)</a></h4>
<ul>
<li>Enables the server to perform a rapid power shut down after the ignition is switched off.</li>
<li>Transitions the server to sleep mode after a defined stand-by time.</li>
</ul>
<h4 id="5-disable-rapid-power-shut-down-0x05"><a class="header" href="#5-disable-rapid-power-shut-down-0x05">5. Disable Rapid Power Shut Down (0x05)</a></h4>
<ul>
<li>Disables the previously enabled rapid power shut down function.</li>
</ul>
<h3 id="example-scenario"><a class="header" href="#example-scenario">Example Scenario</a></h3>
<p>A tester needs to reset the ECU to clear Diagnostic Trouble Codes (DTCs) after fixing issues such as brake failure or camera lens adjustment. The ECU Reset service is used to ensure that both volatile and non-volatile memory is cleared and the ECU reinitializes correctly.</p>
<h3 id="list-of-negative-response-codes-nrcs"><a class="header" href="#list-of-negative-response-codes-nrcs">List of Negative Response Codes (NRCs)</a></h3>
<div class="table-wrapper"><table><thead><tr><th>NRC Code</th><th>Description</th></tr></thead><tbody>
<tr><td>0x12</td><td>Sub-function Not Supported</td></tr>
<tr><td>0x13</td><td>Incorrect Message Length</td></tr>
<tr><td>0x22</td><td>Conditions Not Correct</td></tr>
<tr><td>0x33</td><td>Security Access Denied</td></tr>
</tbody></table>
</div>
<ul>
<li><strong>Sub-function Not Supported (0x12):</strong> Sent if the tester requests an unsupported sub-function.</li>
<li><strong>Incorrect Message Length (0x13):</strong> Sent if the request message length is incorrect.</li>
<li><strong>Conditions Not Correct (0x22):</strong> Sent if the server conditions are not met (e.g., engine should be OFF for an engine management ECU reset).</li>
<li><strong>Security Access Denied (0x33):</strong> Sent if the service is requested without unlocking security access.</li>
</ul>
<h3 id="sequence-diagram"><a class="header" href="#sequence-diagram">Sequence Diagram</a></h3>
<pre><code class="language-plantuml">@startuml
participant Tester
participant ECU

Tester -&gt; ECU: Request ECU Reset (0x11, Sub-function)
ECU -&gt; Tester: Positive Response (0x51, Sub-function)
note right of ECU: ECU performs reset
Tester -&gt; ECU: No request messages
note right of ECU: ECU does not send any response messages
note right of ECU: ECU reinitializes and activates default session

alt Negative Response
    Tester -&gt; ECU: Request ECU Reset with error
    ECU -&gt; Tester: Negative Response (0x7F, 0x11, NRC)
end
@enduml
</code></pre>
<p>This sequence diagram illustrates the interaction between the tester and the ECU during the reset process. It shows how the ECU responds positively before executing the reset and handles negative responses in case of errors.</p>
<h3 id="conclusion-1"><a class="header" href="#conclusion-1">Conclusion</a></h3>
<p>The ECU Reset service (0x11) is essential for ensuring proper initialization and reinitialization of the ECU. Understanding the different sub-functions and handling various scenarios, including negative responses, is crucial for effective ECU management. This comprehensive tutorial should provide a clear understanding of how to utilize the ECU Reset service in various diagnostic and operational contexts.</p>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h2 id="comprehensive-tutorial-on-uds-write-data-by-identifier-service"><a class="header" href="#comprehensive-tutorial-on-uds-write-data-by-identifier-service">Comprehensive Tutorial on UDS Write Data by Identifier Service</a></h2>
<h3 id="introduction-2"><a class="header" href="#introduction-2">Introduction</a></h3>
<p>The "Write Data by Identifier" service (Service ID 0x2E) in the Unified Diagnostic Services (UDS) protocol is utilized to write specific data into an Electronic Control Unit (ECU). This service is often used to configure various parameters within the ECU, such as part numbers, hardware numbers, and software numbers. It can also be used to erase Non-Volatile Memory (NVM) data, reset calibration values, and set option content. The data to be written is identified by a Data Identifier (DID).</p>
<h3 id="structure-of-the-write-data-by-identifier-service"><a class="header" href="#structure-of-the-write-data-by-identifier-service">Structure of the Write Data by Identifier Service</a></h3>
<p>The UDS protocol specifies the structure for requests and responses for the "Write Data by Identifier" service. Below is a detailed breakdown of the request and response frames:</p>
<h4 id="request-frame"><a class="header" href="#request-frame">Request Frame</a></h4>
<ol>
<li><strong>Service ID (1 byte)</strong>: Identifies the service (0x2E for Write Data by Identifier).</li>
<li><strong>Data Identifier (2 bytes)</strong>: Specifies the location within the ECU where the data should be written.</li>
<li><strong>Data (N bytes)</strong>: The actual data to be written. The length and format of this data depend on the specific Data Identifier.</li>
</ol>
<h4 id="positive-response-frame"><a class="header" href="#positive-response-frame">Positive Response Frame</a></h4>
<ol>
<li><strong>Service ID (1 byte)</strong>: Echoes the service ID (0x6E for positive response to Write Data by Identifier).</li>
<li><strong>Data Identifier (2 bytes)</strong>: Echoes the Data Identifier from the request.</li>
</ol>
<h4 id="negative-response-frame"><a class="header" href="#negative-response-frame">Negative Response Frame</a></h4>
<ol>
<li><strong>Negative Response Indicator (1 byte)</strong>: Always 0x7F.</li>
<li><strong>Service ID (1 byte)</strong>: Echoes the service ID (0x2E in this case).</li>
<li><strong>Negative Response Code (NRC) (1 byte)</strong>: Indicates the reason for the negative response. Possible NRCs include:
<ul>
<li>0x12: Sub-function not supported.</li>
<li>0x13: Incorrect message length.</li>
<li>0x22: Conditions not correct.</li>
<li>0x31: Request out of range.</li>
</ul>
</li>
</ol>
<h3 id="conditions-and-constraints"><a class="header" href="#conditions-and-constraints">Conditions and Constraints</a></h3>
<ul>
<li><strong>Security Access</strong>: Some data identifiers may require prior security access (Service 0x27) to ensure secure communication.</li>
<li><strong>Manufacturer Constraints</strong>: Vehicle manufacturers might impose conditions that must be met before this service can be executed. If these conditions are not met, NRC 0x22 (Conditions not correct) is returned.</li>
<li><strong>Read-Only Identifiers</strong>: Not all data identifiers are writable. Some are read-only and will not accept write requests.</li>
</ul>
<h3 id="example-scenarios"><a class="header" href="#example-scenarios">Example Scenarios</a></h3>
<h4 id="scenario-1-successful-write-operation"><a class="header" href="#scenario-1-successful-write-operation">Scenario 1: Successful Write Operation</a></h4>
<p>A tester wants to update the part number stored in the ECU. The request and response sequence would look like this:</p>
<p><strong>Request</strong>:</p>
<pre><code>[0x2E, 0xF1, 0x89, 0x12, 0x34, 0x56, 0x78]
</code></pre>
<ul>
<li>0x2E: Service ID for Write Data by Identifier.</li>
<li>0xF1, 0x89: Data Identifier for part number.</li>
<li>0x12, 0x34, 0x56, 0x78: New part number to be written.</li>
</ul>
<p><strong>Positive Response</strong>:</p>
<pre><code>[0x6E, 0xF1, 0x89]
</code></pre>
<ul>
<li>0x6E: Positive response for Write Data by Identifier.</li>
<li>0xF1, 0x89: Echoes the Data Identifier.</li>
</ul>
<h4 id="scenario-2-negative-response-due-to-conditions-not-correct"><a class="header" href="#scenario-2-negative-response-due-to-conditions-not-correct">Scenario 2: Negative Response due to Conditions Not Correct</a></h4>
<p>A tester attempts to write data to an ECU without meeting the required preconditions.</p>
<p><strong>Request</strong>:</p>
<pre><code>[0x2E, 0xF1, 0x89, 0x12, 0x34, 0x56, 0x78]
</code></pre>
<p><strong>Negative Response</strong>:</p>
<pre><code>[0x7F, 0x2E, 0x22]
</code></pre>
<ul>
<li>0x7F: Negative Response Indicator.</li>
<li>0x2E: Service ID for Write Data by Identifier.</li>
<li>0x22: Conditions not correct.</li>
</ul>
<h3 id="plantuml-sequence-diagram"><a class="header" href="#plantuml-sequence-diagram">PlantUML Sequence Diagram</a></h3>
<p>Below is a PlantUML sequence diagram illustrating a successful write operation.</p>
<pre><code class="language-plantuml">@startuml
actor Tester
participant ECU

Tester -&gt; ECU: [0x2E, 0xF1, 0x89, 0x12, 0x34, 0x56, 0x78] (Write Data by Identifier Request)
activate ECU
ECU -&gt; Tester: [0x6E, 0xF1, 0x89] (Positive Response)
deactivate ECU
@enduml
</code></pre>
<h3 id="handling-errors"><a class="header" href="#handling-errors">Handling Errors</a></h3>
<p>The ECU can respond with various Negative Response Codes (NRCs) to indicate different types of errors. Below is an explanation of the common NRCs for the Write Data by Identifier service:</p>
<ul>
<li><strong>0x12 (Sub-function Not Supported)</strong>: The requested sub-function is not supported by the ECU.</li>
<li><strong>0x13 (Incorrect Message Length)</strong>: The request message length is incorrect.</li>
<li><strong>0x22 (Conditions Not Correct)</strong>: The required preconditions for the service are not met.</li>
<li><strong>0x31 (Request Out of Range)</strong>: The requested data identifier is out of the acceptable range for the service.</li>
</ul>
<h3 id="conclusion-2"><a class="header" href="#conclusion-2">Conclusion</a></h3>
<p>The Write Data by Identifier service in UDS is a powerful tool for configuring and updating ECU parameters. Understanding the structure of request and response frames, as well as the conditions and constraints, is essential for successfully using this service. By following the guidelines and handling possible error responses appropriately, one can effectively manage ECU configurations in a vehicle's diagnostic system.</p>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h2 id="tester-present-0x3e"><a class="header" href="#tester-present-0x3e">"Tester Present" (0x3E)</a></h2>
<h3 id="introduction-3"><a class="header" href="#introduction-3">Introduction</a></h3>
<p>The "Tester Present" service (0x3E) in Unified Diagnostic Services (UDS) is crucial for maintaining the active state of ECUs (Electronic Control Units) during diagnostic sessions. This service prevents the ECU from reverting to the default session when there's no diagnostic communication for an extended period. This is particularly useful in scenarios where the tester requires the ECU to stay in a non-default session without continuous communication from other services.</p>
<h3 id="purpose"><a class="header" href="#purpose">Purpose</a></h3>
<p>The primary purpose of the Tester Present service is to inform ECUs that a diagnostic tester is still connected and that the current diagnostic session should remain active. This service can be used in any session other than the default session.</p>
<h3 id="sub-functions"><a class="header" href="#sub-functions">Sub-functions</a></h3>
<p>The Tester Present service supports two sub-functions:</p>
<ol>
<li><strong>Zero Sub-function (0x00)</strong>: This indicates a normal Tester Present request, where the ECU is expected to send a positive response.</li>
<li><strong>Suppress Positive Response Sub-function (0x80)</strong>: This request instructs the ECU not to send a positive response, thus reducing network traffic.</li>
</ol>
<h3 id="message-format"><a class="header" href="#message-format">Message Format</a></h3>
<h4 id="request-frame-1"><a class="header" href="#request-frame-1">Request Frame</a></h4>
<p>The Tester Present request message consists of the following:</p>
<ol>
<li><strong>Service ID (1 byte)</strong>: 0x3E</li>
<li><strong>Sub-function (1 byte)</strong>: 0x00 or 0x80</li>
</ol>
<h4 id="positive-response-frame-1"><a class="header" href="#positive-response-frame-1">Positive Response Frame</a></h4>
<p>When a positive response is expected, the ECU responds with:</p>
<ol>
<li><strong>Service ID (1 byte)</strong>: 0x3E</li>
<li><strong>Sub-function (1 byte)</strong>: 0x00 or 0x80</li>
</ol>
<h4 id="negative-response-frame-1"><a class="header" href="#negative-response-frame-1">Negative Response Frame</a></h4>
<p>If there's an issue with the request, the ECU sends a negative response:</p>
<ol>
<li><strong>Negative Response Code (1 byte)</strong>: 0x7F</li>
<li><strong>Service ID (1 byte)</strong>: 0x3E</li>
<li><strong>NRC Code (1 byte)</strong>: Specific error code</li>
</ol>
<h3 id="negative-response-codes-nrc"><a class="header" href="#negative-response-codes-nrc">Negative Response Codes (NRC)</a></h3>
<ul>
<li><strong>0x12 (Sub-function Not Supported)</strong>: Indicates that the sub-function requested is not supported by the ECU.</li>
<li><strong>0x13 (Incorrect Message Length)</strong>: Indicates that the message length is incorrect.</li>
</ul>
<h3 id="usage-scenario"><a class="header" href="#usage-scenario">Usage Scenario</a></h3>
<p>Consider a scenario where a tester needs the ECU to stay in an extended diagnostic session for an extended period, perhaps to perform routine control or security access tasks. During these periods, there might be no continuous communication. The Tester Present service (0x3E) is used to ensure the ECU remains in the non-default session.</p>
<h3 id="detailed-sub-function-explanation"><a class="header" href="#detailed-sub-function-explanation">Detailed Sub-function Explanation</a></h3>
<ul>
<li>
<p><strong>Zero Sub-function (0x00)</strong>:</p>
<ul>
<li>Sent by the tester to indicate a normal request.</li>
<li>The ECU responds positively unless otherwise instructed.</li>
</ul>
</li>
<li>
<p><strong>Suppress Positive Response (0x80)</strong>:</p>
<ul>
<li>Sent by the tester to suppress the positive response.</li>
<li>This helps in reducing network traffic and can be used when the tester does not require an acknowledgment.</li>
</ul>
</li>
</ul>
<h3 id="sequence-diagram-1"><a class="header" href="#sequence-diagram-1">Sequence Diagram</a></h3>
<p>Below is a sequence diagram illustrating the interaction between the tester and the ECU using the Tester Present service:</p>
<pre><code class="language-plantuml">@startuml
actor Tester
participant ECU

Tester -&gt; ECU: Tester Present Request (0x3E, 0x00)
alt Positive Response Expected
    ECU --&gt; Tester: Positive Response (0x3E, 0x00)
else Suppress Positive Response
    Tester -&gt; ECU: Tester Present Request (0x3E, 0x80)
    note right of ECU: No Response Sent
end
Tester -&gt; ECU: Another Diagnostic Request
alt Incorrect Message Length
    ECU --&gt; Tester: Negative Response (0x7F, 0x3E, 0x13)
else Sub-function Not Supported
    ECU --&gt; Tester: Negative Response (0x7F, 0x3E, 0x12)
end
@enduml
</code></pre>
<h3 id="practical-example"><a class="header" href="#practical-example">Practical Example</a></h3>
<h4 id="scenario-wiper-motor-timer-adjustment"><a class="header" href="#scenario-wiper-motor-timer-adjustment">Scenario: Wiper Motor Timer Adjustment</a></h4>
<p>In a practical example, consider an ECU managing a wiper motor that requires the adjustment of a 555 Timer IC. This adjustment can only be performed in an extended diagnostic session. The Tester Present service is used to ensure that the ECU remains in the extended session while the adjustment routine is carried out, even if there's no continuous communication from other services.</p>
<h3 id="conclusion-3"><a class="header" href="#conclusion-3">Conclusion</a></h3>
<p>The Tester Present (0x3E) service is a vital part of UDS, ensuring that ECUs remain in the required diagnostic session. Understanding how to use its sub-functions effectively can help maintain stable communication and diagnostic processes, especially during extended diagnostic operations.</p>
<p>By implementing the Tester Present service correctly, diagnostic tools can keep ECUs in the desired session, avoiding unnecessary resets and ensuring smooth and continuous diagnostic procedures.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="communication-control-service-id-28"><a class="header" href="#communication-control-service-id-28">Communication Control (Service ID 28)</a></h1>
<h2 id="introduction-4"><a class="header" href="#introduction-4">Introduction</a></h2>
<p>In this guide, we will explore the "Communication Control" service, designated by Service ID 28. Despite its limited use in many automotive projects, it serves a critical function in managing communication between Electronic Control Units (ECUs) within a vehicle network. Understanding this service is essential for developing robust automotive communication systems.</p>
<h2 id="objective-of-communication-control"><a class="header" href="#objective-of-communication-control">Objective of Communication Control</a></h2>
<p>The primary objective of the Communication Control service is to regulate the communication between ECUs and other networks. This regulation can occur in four distinct ways:</p>
<ol>
<li><strong>Disabling Communication</strong>: Both ECUs stop communicating.</li>
<li><strong>Enable Transmission Only</strong>: Only the transmission is permitted while reception is disabled.</li>
<li><strong>Enable Reception Only</strong>: Only the reception is permitted while transmission is disabled.</li>
<li><strong>Enable Both Transmission and Reception</strong>: Both ECUs can freely transmit and receive messages.</li>
</ol>
<p>These methods constitute the sub-functions of the Communication Control service, allowing fine-grained control over ECU communications.</p>
<h2 id="sub-functions-of-communication-control"><a class="header" href="#sub-functions-of-communication-control">Sub-Functions of Communication Control</a></h2>
<p>The service manages communication between two ECUs, which we will refer to as ECU A and ECU B. The sub-functions include:</p>
<ol>
<li><strong>Enable Both (0x00)</strong>: Enables both transmission and reception.</li>
<li><strong>Enable Transmission Only (0x01)</strong>: Enables transmission only.</li>
<li><strong>Enable Reception Only (0x02)</strong>: Enables reception only.</li>
<li><strong>Disable Both (0x03)</strong>: Disables both transmission and reception.</li>
</ol>
<h3 id="enhanced-address-information"><a class="header" href="#enhanced-address-information">Enhanced Address Information</a></h3>
<p>The service also supports enhanced sub-functions that allow more targeted control:</p>
<ol>
<li><strong>Enable Both with Enhanced Address Information (0x04)</strong>: Enables both transmission and reception for a specific node.</li>
<li><strong>Enable Transmission Only with Enhanced Address Information (0x05)</strong>: Enables transmission for a specific node.</li>
<li><strong>Enable Reception Only with Enhanced Address Information (0x06)</strong>: Enables reception for a specific node.</li>
<li><strong>Disable Both with Enhanced Address Information (0x07)</strong>: Disables both transmission and reception for a specific node.</li>
</ol>
<h2 id="types-of-communication"><a class="header" href="#types-of-communication">Types of Communication</a></h2>
<p>Communication can be categorized into two types:</p>
<ol>
<li><strong>Normal Communication</strong>: Communication within the same network (e.g., between different ECUs within a single vehicle).</li>
<li><strong>Network Communication</strong>: Communication between different networks (e.g., between vehicles or between a vehicle and external infrastructure).</li>
</ol>
<h3 id="scenario-example"><a class="header" href="#scenario-example">Scenario Example</a></h3>
<p>Consider a vehicle equipped with adaptive cruise control. The system communicates with another vehicle to maintain a safe following distance. This communication could be classified as normal (within the vehicle's network) or network (between different vehicles). The Communication Control service ensures that messages are transmitted or received according to the specified sub-function.</p>
<h2 id="communication-control-frame-structure"><a class="header" href="#communication-control-frame-structure">Communication Control Frame Structure</a></h2>
<h3 id="request-frame-2"><a class="header" href="#request-frame-2">Request Frame</a></h3>
<p>The request frame for this service includes the following components:</p>
<ol>
<li><strong>Service ID (0x28)</strong>: Identifies the Communication Control service.</li>
<li><strong>Sub-function</strong>: Specifies the desired control action (e.g., 0x00 for enabling both).</li>
<li><strong>Communication Type</strong>: Indicates whether the communication is normal or network type.</li>
<li><strong>Node Identification Number (optional)</strong>: Specifies the node to which the control applies.</li>
</ol>
<h3 id="positive-response"><a class="header" href="#positive-response">Positive Response</a></h3>
<p>The positive response frame confirms that the requested action has been successfully applied. It mirrors the request with a positive response indicator (e.g., 0x60).</p>
<h3 id="negative-response"><a class="header" href="#negative-response">Negative Response</a></h3>
<p>Negative responses indicate errors or unsupported actions. Common error codes include:</p>
<ul>
<li><strong>0x12</strong>: Sub-function not supported.</li>
<li><strong>0x13</strong>: Incorrect message length.</li>
<li><strong>0x22</strong>: Conditions not correct.</li>
<li><strong>0x31</strong>: Request out of range.</li>
</ul>
<h2 id="implementation-examples"><a class="header" href="#implementation-examples">Implementation Examples</a></h2>
<h3 id="enabling-both-transmission-and-reception-0x00"><a class="header" href="#enabling-both-transmission-and-reception-0x00">Enabling Both Transmission and Reception (0x00)</a></h3>
<p><strong>Request Frame</strong>:</p>
<pre><code>28 00 01
</code></pre>
<p><strong>Positive Response Frame</strong>:</p>
<pre><code>60 00
</code></pre>
<h3 id="enabling-transmission-only-0x01"><a class="header" href="#enabling-transmission-only-0x01">Enabling Transmission Only (0x01)</a></h3>
<p><strong>Request Frame</strong>:</p>
<pre><code>28 01 01
</code></pre>
<p><strong>Positive Response Frame</strong>:</p>
<pre><code>60 01
</code></pre>
<h3 id="enabling-reception-only-0x02"><a class="header" href="#enabling-reception-only-0x02">Enabling Reception Only (0x02)</a></h3>
<p><strong>Request Frame</strong>:</p>
<pre><code>28 02 01
</code></pre>
<p><strong>Positive Response Frame</strong>:</p>
<pre><code>60 02
</code></pre>
<h3 id="disabling-both-0x03"><a class="header" href="#disabling-both-0x03">Disabling Both (0x03)</a></h3>
<p><strong>Request Frame</strong>:</p>
<pre><code>28 03 01
</code></pre>
<p><strong>Positive Response Frame</strong>:</p>
<pre><code>60 03
</code></pre>
<h3 id="enhanced-address-information-examples"><a class="header" href="#enhanced-address-information-examples">Enhanced Address Information Examples</a></h3>
<p>For enhanced control using node identification numbers, the frame structure extends to include the specific node:</p>
<p><strong>Request Frame for Enabling Both with Enhanced Address Information</strong>:</p>
<pre><code>28 04 01 01 02
</code></pre>
<p><strong>Positive Response Frame</strong>:</p>
<pre><code>60 04
</code></pre>
<h2 id="log-analysis"><a class="header" href="#log-analysis">Log Analysis</a></h2>
<p>Logs are crucial for debugging and validating the functionality of the Communication Control service. Logs typically capture request and response frames, allowing analysis of whether the requested action was successfully applied.</p>
<h3 id="example-log-entry"><a class="header" href="#example-log-entry">Example Log Entry</a></h3>
<p>For enabling both transmission and reception:</p>
<p><strong>Request</strong>:</p>
<pre><code>28 00 01
</code></pre>
<p><strong>Response</strong>:</p>
<pre><code>60 00
</code></pre>
<p>Logs can be examined using text editors or specialized log analysis tools to verify the correctness of the communication control actions.</p>
<h2 id="conclusion-4"><a class="header" href="#conclusion-4">Conclusion</a></h2>
<p>The Communication Control service (Service ID 28) is an essential tool for managing ECU communications within a vehicle network. By understanding and utilizing its sub-functions, engineers can effectively control and debug communication scenarios. This guide has provided a detailed overview of the service's purpose, sub-functions, communication types, frame structures, and practical implementation steps, offering a comprehensive understanding of how to leverage this service in automotive applications.</p>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="request-download-service-id-0x34"><a class="header" href="#request-download-service-id-0x34">Request Download (Service ID 0x34)</a></h1>
<h2 id="introduction-5"><a class="header" href="#introduction-5">Introduction</a></h2>
<p>In this guide, we will explore the "Request Download" service, designated by Service ID 0x34, which falls under the Upload and Download Functional Data group. This functional group consists of five services, and Request Download is the first one. Understanding this service is crucial as it lays the foundation for comprehending the subsequent services in this group.</p>
<h2 id="objective-of-request-download"><a class="header" href="#objective-of-request-download">Objective of Request Download</a></h2>
<p>The primary objective of the Request Download service is to initiate a data transfer from the client (tester) to the ECU. Contrary to the typical understanding of "download," where data is retrieved from a source, in this context, downloading refers to transferring data to the ECU. The service is used to request permission for this data transfer.</p>
<h3 id="concept-clarification"><a class="header" href="#concept-clarification">Concept Clarification</a></h3>
<p>To clarify, in the Unified Diagnostic Services (UDS) context, "downloading" data means transferring data from the client to the ECU. For example, when you are flashing an ECU, you are downloading (transferring) new firmware from your diagnostic tool to the ECU.</p>
<h2 id="process-overview"><a class="header" href="#process-overview">Process Overview</a></h2>
<h3 id="steps-involved"><a class="header" href="#steps-involved">Steps Involved</a></h3>
<ol>
<li><strong>Client Requests Download</strong>: The client (tester) sends a request to the ECU indicating the intention to transfer data.</li>
<li><strong>ECU Validates Request</strong>: The ECU checks the request conditions and if valid, sends a positive response.</li>
<li><strong>Data Transfer Initiation</strong>: Upon receiving a positive response, the client begins the data transfer process.</li>
</ol>
<h3 id="example-scenario-1"><a class="header" href="#example-scenario-1">Example Scenario</a></h3>
<p>Consider the scenario where you need to flash new firmware to an ECU. The request download service initiates this process by requesting permission from the ECU to start the data transfer.</p>
<h2 id="key-terminologies"><a class="header" href="#key-terminologies">Key Terminologies</a></h2>
<p>Before diving into the request and response frames, it is essential to understand some key terminologies used in the Request Download service.</p>
<h3 id="data-format-identifier"><a class="header" href="#data-format-identifier">Data Format Identifier</a></h3>
<p>The Data Format Identifier is a one-byte parameter where each nibble represents different encoding methods:</p>
<ul>
<li><strong>High Nibble</strong>: Compression method</li>
<li><strong>Low Nibble</strong>: Encryption method</li>
</ul>
<p>For example:</p>
<ul>
<li><code>0x00</code>: No compression or encryption.</li>
<li><code>0x11</code>: Compressed and encrypted data.</li>
</ul>
<h3 id="address-and-length-format-identifier"><a class="header" href="#address-and-length-format-identifier">Address and Length Format Identifier</a></h3>
<p>This parameter specifies the format for the memory address and memory size:</p>
<ul>
<li><strong>High Nibble</strong>: Number of bytes for memory address</li>
<li><strong>Low Nibble</strong>: Number of bytes for memory size</li>
</ul>
<p>For instance:</p>
<ul>
<li><code>0x21</code>: Indicates that the memory address is 2 bytes and the memory size is 1 byte.</li>
</ul>
<h3 id="maximum-number-of-block-length"><a class="header" href="#maximum-number-of-block-length">Maximum Number of Block Length</a></h3>
<p>This parameter, included in the positive response from the ECU, informs the client about the maximum number of bytes that can be included in each data transfer block.</p>
<h3 id="block-sequence-counter"><a class="header" href="#block-sequence-counter">Block Sequence Counter</a></h3>
<p>The Block Sequence Counter starts from <code>0x01</code> and increments by one for each subsequent data block. This counter ensures the correct sequencing of data blocks during transfer.</p>
<h2 id="request-and-response-frames-1"><a class="header" href="#request-and-response-frames-1">Request and Response Frames</a></h2>
<h3 id="request-frame-3"><a class="header" href="#request-frame-3">Request Frame</a></h3>
<p>The request frame structure for the Request Download service includes:</p>
<ol>
<li><strong>Service ID (0x34)</strong>: Identifies the Request Download service.</li>
<li><strong>Data Format Identifier</strong>: Specifies compression and encryption methods.</li>
<li><strong>Address and Length Format Identifier</strong>: Indicates the number of bytes used for memory address and size.</li>
<li><strong>Memory Address</strong>: The starting address for data transfer.</li>
<li><strong>Memory Size</strong>: The size of the data to be transferred.</li>
</ol>
<h3 id="example-request-frame"><a class="header" href="#example-request-frame">Example Request Frame</a></h3>
<p>For a request where data is neither compressed nor encrypted, with a 2-byte memory address and 1-byte memory size:</p>
<pre><code>34 00 21 00 10 00 04
</code></pre>
<p>Here:</p>
<ul>
<li><code>34</code>: Service ID</li>
<li><code>00</code>: Data Format Identifier (no compression, no encryption)</li>
<li><code>21</code>: Address and Length Format Identifier</li>
<li><code>00 10</code>: Memory Address</li>
<li><code>00 04</code>: Memory Size</li>
</ul>
<h3 id="positive-response-frame-2"><a class="header" href="#positive-response-frame-2">Positive Response Frame</a></h3>
<p>The positive response frame from the ECU includes:</p>
<ol>
<li><strong>Positive Response ID (0x74)</strong>: Indicates a positive response to the Request Download service.</li>
<li><strong>Length Format Identifier</strong>: Specifies the format for the maximum block length.</li>
<li><strong>Maximum Block Length</strong>: Indicates the maximum number of bytes per data transfer block.</li>
</ol>
<h3 id="example-positive-response-frame"><a class="header" href="#example-positive-response-frame">Example Positive Response Frame</a></h3>
<p>For a response where the maximum block length is 1024 bytes:</p>
<pre><code>74 30 04 00
</code></pre>
<p>Here:</p>
<ul>
<li><code>74</code>: Positive Response ID</li>
<li><code>30</code>: Length Format Identifier</li>
<li><code>04 00</code>: Maximum Block Length (1024 bytes)</li>
</ul>
<h2 id="practical-implementation"><a class="header" href="#practical-implementation">Practical Implementation</a></h2>
<h3 id="step-by-step-process"><a class="header" href="#step-by-step-process">Step-by-Step Process</a></h3>
<ol>
<li>
<p><strong>Request Download Initiation</strong></p>
<ul>
<li><strong>Request Frame</strong>:
<pre><code>34 00 21 00 10 00 04
</code></pre>
</li>
<li><strong>Explanation</strong>: Request to download 4 bytes of data to memory address <code>0x0010</code>.</li>
</ul>
</li>
<li>
<p><strong>ECU Response</strong></p>
<ul>
<li><strong>Positive Response Frame</strong>:
<pre><code>74 30 04 00
</code></pre>
</li>
<li><strong>Explanation</strong>: ECU allows the data transfer with a maximum block length of 1024 bytes.</li>
</ul>
</li>
</ol>
<h2 id="negative-response-codes"><a class="header" href="#negative-response-codes">Negative Response Codes</a></h2>
<p>Negative responses indicate errors or unsupported actions. Common error codes include:</p>
<ul>
<li><strong>0x13</strong>: Incorrect message length or invalid format.</li>
<li><strong>0x22</strong>: Conditions not correct.</li>
<li><strong>0x31</strong>: Request out of range.</li>
<li><strong>0x70</strong>: Upload/Download not accepted.</li>
</ul>
<h2 id="log-analysis-1"><a class="header" href="#log-analysis-1">Log Analysis</a></h2>
<p>Logs are crucial for debugging and validating the functionality of the Request Download service. Logs typically capture request and response frames, allowing analysis of whether the requested action was successfully applied.</p>
<h3 id="example-log-entry-1"><a class="header" href="#example-log-entry-1">Example Log Entry</a></h3>
<p><strong>Request</strong>:</p>
<pre><code>34 00 21 00 10 00 04
</code></pre>
<p><strong>Response</strong>:</p>
<pre><code>74 30 04 00
</code></pre>
<p>Logs can be examined using text editors or specialized log analysis tools to verify the correctness of the communication control actions.</p>
<h2 id="conclusion-5"><a class="header" href="#conclusion-5">Conclusion</a></h2>
<p>The Request Download service (Service ID 0x34) is essential for initiating data transfers from a client to an ECU. By understanding and utilizing its components and sub-functions, engineers can effectively manage and troubleshoot data download processes within vehicle networks. This guide has provided a detailed overview of the service's purpose, terminologies, frame structures, and practical implementation steps, offering a comprehensive understanding of how to leverage this service in automotive applications.</p>
<h3 id="comprehensive-tutorial-on-uds-diagnostic-request-download-service"><a class="header" href="#comprehensive-tutorial-on-uds-diagnostic-request-download-service">Comprehensive Tutorial on UDS Diagnostic: Request Download Service</a></h3>
<h4 id="introduction-6"><a class="header" href="#introduction-6">Introduction</a></h4>
<p>In this tutorial, we will delve into the Unified Diagnostic Services (UDS) with a particular focus on the Request Download service. UDS is a protocol used in automotive diagnostics, allowing for communication between a tester (client) and an Electronic Control Unit (ECU). The Request Download service is a fundamental part of the UDS protocol, enabling the transfer of data from the client to the ECU. This tutorial aims to clarify the intricacies of this service, ensuring a comprehensive understanding for automotive diagnostic professionals.</p>
<h4 id="functional-data-group-upload-and-download"><a class="header" href="#functional-data-group-upload-and-download">Functional Data Group: Upload and Download</a></h4>
<p>The Request Download service belongs to the functional group known as Upload and Download Functional Data. This group encompasses five services, each playing a critical role in data transfer between the client and the ECU. Understanding the Request Download service is essential, as it lays the groundwork for grasping the subsequent services in this group.</p>
<h4 id="understanding-the-request-download-service"><a class="header" href="#understanding-the-request-download-service">Understanding the Request Download Service</a></h4>
<p>The Request Download service is utilized by the tester (client) to initiate data transfer to the ECU. Contrary to common misconceptions, "download" in this context means sending data from the client to the ECU, not retrieving data from the ECU.</p>
<h4 id="process-overview-1"><a class="header" href="#process-overview-1">Process Overview</a></h4>
<ol>
<li><strong>Initiation</strong>: The client (tester) sends a Request Download message to the ECU to start the data transfer process.</li>
<li><strong>ECU Response</strong>: The ECU evaluates the request and, if conditions are satisfactory, sends a positive response allowing the data transfer to proceed.</li>
<li><strong>Data Transfer</strong>: Following the positive response, the actual data transfer can begin.</li>
</ol>
<h4 id="key-concepts-and-terminologies"><a class="header" href="#key-concepts-and-terminologies">Key Concepts and Terminologies</a></h4>
<p>Understanding the following terminologies is crucial for comprehending the Request Download service:</p>
<ol>
<li>
<p><strong>Data Format Identifier (DFI)</strong>:</p>
<ul>
<li><strong>Compression Method</strong>: Indicates if the data is compressed.</li>
<li><strong>Encryption Method</strong>: Indicates if the data is encrypted.</li>
<li>Example: A DFI value of <code>00</code> indicates no compression and no encryption.</li>
</ul>
</li>
<li>
<p><strong>Address and Length Format Identifier (ALFI)</strong>:</p>
<ul>
<li><strong>Memory Address</strong>: Specifies the starting address for data transfer.</li>
<li><strong>Memory Size</strong>: Specifies the size of the data block to be transferred.</li>
<li>Example: An ALFI value of <code>21</code> means the memory address length is 2 bytes and the memory size length is 1 byte.</li>
</ul>
</li>
<li>
<p><strong>Length Format Identifier (LFI)</strong>:</p>
<ul>
<li><strong>Block Length Parameter</strong>: Specifies the maximum number of bytes in each data block.</li>
<li>Example: An LFI value of <code>30</code> could indicate a block length of 3 bytes.</li>
</ul>
</li>
<li>
<p><strong>Block Sequence Counter</strong>:</p>
<ul>
<li>A counter that increments with each subsequent data block, starting from <code>01</code>.</li>
</ul>
</li>
<li>
<p><strong>Checksum</strong>:</p>
<ul>
<li>Ensures data integrity by comparing initial and final values of the data transfer process.</li>
</ul>
</li>
</ol>
<h4 id="request-and-response-frame-formats"><a class="header" href="#request-and-response-frame-formats">Request and Response Frame Formats</a></h4>
<p><strong>Request Frame Format</strong>:</p>
<ul>
<li><strong>Service ID (SID)</strong>: <code>34</code> (Request Download)</li>
<li><strong>Data Format Identifier</strong>: Specifies compression and encryption status.</li>
<li><strong>Address and Length Format Identifier</strong>: Specifies the number of bytes for memory address and size.</li>
<li><strong>Memory Address and Size</strong>: Actual values for the memory address and size.</li>
</ul>
<p><strong>Response Frame Format</strong>:</p>
<ul>
<li><strong>Positive Response SID</strong>: <code>74</code> (Positive Response for Request Download)</li>
<li><strong>Length Format Identifier</strong>: Specifies the length of the maximum number of data blocks.</li>
<li><strong>Max Number of Data Blocks</strong>: Indicates how many data bytes can be included in each transfer block.</li>
</ul>
<h4 id="example-scenario-2"><a class="header" href="#example-scenario-2">Example Scenario</a></h4>
<ol>
<li>
<p><strong>Client Request</strong>:</p>
<ul>
<li>Service ID: <code>34</code></li>
<li>Data Format Identifier: <code>11</code> (compressed and encrypted)</li>
<li>Address and Length Format Identifier: <code>11</code> (1 byte for memory address and size)</li>
<li>Example Memory Address and Size: <code>0001</code> (address) and <code>0004</code> (size)</li>
</ul>
</li>
<li>
<p><strong>ECU Response</strong>:</p>
<ul>
<li>Positive Response SID: <code>74</code></li>
<li>Length Format Identifier: <code>30</code> (3 bytes for the maximum number of data blocks)</li>
<li>Example Max Number of Data Blocks: <code>1622</code> bytes</li>
</ul>
</li>
</ol>
<h4 id="supported-negative-responses"><a class="header" href="#supported-negative-responses">Supported Negative Responses</a></h4>
<p>Various negative responses can occur during the Request Download process:</p>
<ul>
<li><strong><code>13</code></strong>: Incorrect Message Length</li>
<li><strong><code>70</code></strong>: Upload/Download Not Accepted</li>
<li><strong><code>7F</code></strong>: General Reject</li>
</ul>
<h4 id="conclusion-6"><a class="header" href="#conclusion-6">Conclusion</a></h4>
<p>Understanding the Request Download service within the UDS protocol is crucial for automotive diagnostic professionals. This service initiates the transfer of data from the client to the ECU, a process essential for tasks such as flashing or programming the ECU. By mastering the terminologies, frame formats, and potential responses, professionals can effectively utilize the Request Download service, paving the way for successful data transfer operations.</p>
<p>In the next tutorial, we will explore the Request Upload service, which complements the Request Download service by facilitating data transfer from the ECU to the client.</p>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h3 id="uds-unified-diagnostic-services-tutorial-input-output-control-by-data-identifier-service-0x2f"><a class="header" href="#uds-unified-diagnostic-services-tutorial-input-output-control-by-data-identifier-service-0x2f">UDS (Unified Diagnostic Services) Tutorial: Input Output Control by Data Identifier (Service 0x2F)</a></h3>
<h4 id="introduction-7"><a class="header" href="#introduction-7">Introduction</a></h4>
<p>Unified Diagnostic Services (UDS) is a protocol used in the automotive industry for diagnostics and communication between a vehicle's electronic control unit (ECU) and a diagnostic tool. This tutorial focuses on the Input Output Control by Data Identifier (DID), specifically the service 0x2F. This service is essential for controlling I/O (sensors/actuators) to achieve desired outcomes through feedback systems.</p>
<hr />
<h4 id="purpose-of-io-control-by-data-identifier-0x2f"><a class="header" href="#purpose-of-io-control-by-data-identifier-0x2f">Purpose of I/O Control by Data Identifier (0x2F)</a></h4>
<p>The primary purpose of controlling the system/IO is to achieve the desired results with the help of a feedback system. This involves manipulating the inputs and outputs of various sensors and actuators within the vehicle to ensure optimal performance and response.</p>
<hr />
<h4 id="request-and-response-formats"><a class="header" href="#request-and-response-formats">Request and Response Formats</a></h4>
<p><strong>Positive Response Frame Format:</strong></p>
<ul>
<li>
<p><strong>Service ID:</strong> 0x2F</p>
</li>
<li>
<p><strong>Example:</strong> Reading current throttle position data.</p>
<p><strong>Request:</strong></p>
<pre><code>0x2F 0x05 0x0C
</code></pre>
<p>Where:</p>
<ul>
<li><code>0x05</code> represents a short-term adjustment.</li>
<li><code>0x0C</code> represents the control state with 12% throttle position.</li>
</ul>
<p><strong>Response:</strong></p>
<pre><code>0x62 0x05 0x0C 0x06
</code></pre>
<p>Where:</p>
<ul>
<li><code>0x62</code> is the positive response.</li>
<li><code>0x05 0x0C</code> is echoed back.</li>
<li><code>0x06</code> represents the data (throttle position at 6%).</li>
</ul>
</li>
</ul>
<p><strong>Negative Response Frame Format:</strong></p>
<ul>
<li>
<p><strong>Service ID:</strong> 0x7F followed by 0x2F.</p>
</li>
<li>
<p><strong>Example of Negative Responses and their NRCs:</strong></p>
<ul>
<li><code>0x13</code>: Incorrect Message Length Or Invalid Format in PCI length declaration.</li>
<li><code>0x22</code>: Conditions Not Correct (e.g., criteria for security access not met).</li>
<li><code>0x31</code>: Request out of range (invalid DID).</li>
<li><code>0x33</code>: Security Access Denied (request made without unlocking the ECU).</li>
<li><code>0x35</code>: Invalid Key (key value does not match stored value).</li>
<li><code>0x36</code>: Exceed number of attempts (maximum invalid attempts exceeded).</li>
<li><code>0x37</code>: Required Time Delay not expired (delay timer active and request sent prematurely).</li>
</ul>
</li>
</ul>
<hr />
<h4 id="nrc-flow-for-service-0x2f"><a class="header" href="#nrc-flow-for-service-0x2f">NRC Flow for Service 0x2F</a></h4>
<pre><code class="language-plantuml">@startuml
title NRC Flow for Service 0x2F

[*] --&gt; Incorrect_Length : 0x13
Incorrect_Length --&gt; Request_Out_of_Range : 0x31
Request_Out_of_Range --&gt; Security_Access_Denied : 0x33
Security_Access_Denied --&gt; Conditions_Not_Correct : 0x22
Conditions_Not_Correct --&gt; [*] : 0xFF

@enduml
</code></pre>
<hr />
<h3 id="practical-example-reading-throttle-position"><a class="header" href="#practical-example-reading-throttle-position">Practical Example: Reading Throttle Position</a></h3>
<p><strong>Reading Current Throttle Position Data:</strong></p>
<ol>
<li>
<p><strong>Initial Request:</strong></p>
<pre><code>0x2F 0x22 0x1B 0x1C
</code></pre>
<ul>
<li>This request asks for the current throttle position.</li>
</ul>
</li>
<li>
<p><strong>Immediate Response:</strong></p>
<pre><code>0x62 0x22 0x1B 0x1C 0x06
</code></pre>
<ul>
<li>Positive response indicating the throttle position is at 6%.</li>
</ul>
</li>
<li>
<p><strong>Delayed Response (after 5 seconds):</strong></p>
<pre><code>0x2F 0x22 0x1B 0x1C
</code></pre>
<ul>
<li>Request sent again after a delay to ensure consistent data retrieval.</li>
</ul>
</li>
</ol>
<hr />
<h3 id="supported-negative-response-codes-nrcs-for-service-0x2f"><a class="header" href="#supported-negative-response-codes-nrcs-for-service-0x2f">Supported Negative Response Codes (NRCs) for Service 0x2F</a></h3>
<ol>
<li>
<p><strong>Incorrect Message Length or Invalid Format (0x13):</strong></p>
<ul>
<li>Triggered when the request message has an incorrect length or invalid format.</li>
</ul>
</li>
<li>
<p><strong>Conditions Not Correct (0x22):</strong></p>
<ul>
<li>Occurs if the request does not meet certain criteria, such as unmet security access conditions.</li>
</ul>
</li>
<li>
<p><strong>Request Out of Range (0x31):</strong></p>
<ul>
<li>When the DID requested is not supported or is invalid.</li>
</ul>
</li>
<li>
<p><strong>Security Access Denied (0x33):</strong></p>
<ul>
<li>When a request is made without proper security access.</li>
</ul>
</li>
<li>
<p><strong>Invalid Key (0x35):</strong></p>
<ul>
<li>When the key value in the request does not match the stored value in the server.</li>
</ul>
</li>
<li>
<p><strong>Exceed Number of Attempts (0x36):</strong></p>
<ul>
<li>Triggered when the number of invalid attempts exceeds the allowed maximum.</li>
</ul>
</li>
<li>
<p><strong>Required Time Delay Not Expired (0x37):</strong></p>
<ul>
<li>When a request is made before the required time delay has expired.</li>
</ul>
</li>
</ol>
<hr />
<h3 id="sequence-diagram-for-reading-throttle-position"><a class="header" href="#sequence-diagram-for-reading-throttle-position">Sequence Diagram for Reading Throttle Position</a></h3>
<pre><code class="language-plantuml">@startuml
title Sequence Diagram for Reading Throttle Position

actor Tester
participant ECU

Tester -&gt; ECU: 0x2F 0x05 0x0C
ECU --&gt; Tester: 0x62 0x05 0x0C 0x06

Tester -&gt; ECU: 0x2F 0x22 0x1B 0x1C
ECU --&gt; Tester: 0x62 0x22 0x1B 0x1C 0x06

Tester -&gt; ECU: 0x2F 0x22 0x1B 0x1C (after 5 secs)
ECU --&gt; Tester: 0x62 0x22 0x1B 0x1C 0x06

@enduml
</code></pre>
<p>This tutorial provides a detailed understanding of the Input Output Control by Data Identifier (0x2F) service in UDS. It includes the purpose, request and response formats, practical examples, supported NRCs, and sequence diagrams for better comprehension. By following this tutorial, one can effectively implement and troubleshoot this service in automotive diagnostics.</p>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="clear-dtc-information"><a class="header" href="#clear-dtc-information">Clear DTC Information</a></h1>
<div style="break-before: page; page-break-before: always;"></div><p>Here is a detailed and comprehensive tutorial based on the provided content:</p>
<p>Title: Understanding Negative Response Codes (NRCs) in Unified Diagnostic Services</p>
<p>Introduction:
This tutorial aims to provide an in-depth explanation of negative response codes (NRCs) in the Unified Diagnostic Services. NRCs are essential for understanding and troubleshooting diagnostic communication between an Electronic Control Unit (ECU) and a diagnostic tool or software. The tutorial covers two ranges of NRCs: 0x01 to 0x7F and 0x80 to 0xF0.</p>
<p>Part 1: NRC Range 0x01 to 0x7F</p>
<ol>
<li>
<p>Service Not Supported (0x11)</p>
<ul>
<li>This NRC occurs when the requested service ID is not supported by the ECU software.</li>
<li>For example, if the software only supports services 0x10, 0x27, and 0x31, but you request service 0x22 or 0x2E, the ECU will respond with NRC 0x11 (Service Not Supported).</li>
</ul>
</li>
<li>
<p>Sub-Function Not Supported (0x12)</p>
<ul>
<li>This NRC is returned when the requested sub-function is not supported by the ECU software for the specific service.</li>
<li>For instance, if a service only supports sub-functions 0x01, 0x02, and 0x03, but you request sub-function 0x07, the ECU will respond with NRC 0x12 (Sub-Function Not Supported).</li>
</ul>
</li>
<li>
<p>Incorrect Message Length (0x13)</p>
<ul>
<li>This NRC occurs when the data length specified in the request message does not match the actual data bytes provided.</li>
<li>For example, if you specify a data length of 4 bytes but provide more or fewer data bytes, the ECU will respond with NRC 0x13 (Incorrect Message Length).</li>
</ul>
</li>
<li>
<p>Response Too Long (0x14)</p>
<ul>
<li>This NRC is returned when the ECU's response data exceeds the maximum allowed frame size, and the diagnostic tool or software does not support flow control.</li>
<li>In such cases, the ECU will respond with NRC 0x14 (Response Too Long) to indicate that the response cannot be sent due to its excessive length.</li>
</ul>
</li>
<li>
<p>Busy Repeat Request (0x21)</p>
<ul>
<li>This NRC is sent when the ECU is currently processing a previous request and cannot handle a new request immediately.</li>
<li>The diagnostic tool or software should wait for a few seconds (typically 4-5 seconds) and then repeat the request.</li>
</ul>
</li>
<li>
<p>Condition Not Correct (0x22)</p>
<ul>
<li>This NRC indicates that the conditions for executing the requested service or sub-function are not met.</li>
<li>The specific conditions and scenarios that trigger this NRC will be covered in the next part of the tutorial.</li>
</ul>
</li>
<li>
<p>Request Sequence Error (0x24)</p>
<ul>
<li>This NRC occurs when the diagnostic tool or software does not follow the correct sequence of requests for a specific service or operation.</li>
<li>For example, if a security access service requires first requesting a seed and then providing a key, but the key is sent without requesting the seed, the ECU will respond with NRC 0x24 (Request Sequence Error).</li>
</ul>
</li>
<li>
<p>Security Access Denied (0x33)</p>
<ul>
<li>This NRC is returned when the diagnostic tool or software attempts to access a secured or critical service without proper authentication or security access.</li>
<li>For example, trying to access a routine control service without unlocking security access will result in NRC 0x33 (Security Access Denied).</li>
</ul>
</li>
<li>
<p>Invalid Key (0x35)</p>
<ul>
<li>This NRC indicates that the key provided for security access is invalid or incorrect.</li>
<li>The diagnostic tool or software should request a new seed and provide the correct key.</li>
</ul>
</li>
<li>
<p>Exceeded Number of Attempts (0x36)</p>
<ul>
<li>This NRC is sent when the diagnostic tool or software exceeds the maximum allowed number of attempts to provide a valid key for security access.</li>
<li>The ECU will block further attempts for a certain period to prevent brute-force attacks.</li>
</ul>
</li>
<li>
<p>Required Time Delay Not Expired (0x37)</p>
<ul>
<li>This NRC occurs when the diagnostic tool or software attempts to perform an operation or service before the required time delay has elapsed.</li>
<li>For example, if a service requires a 5-second delay after a previous request, but the next request is sent before the delay expires, the ECU will respond with NRC 0x37 (Required Time Delay Not Expired).</li>
</ul>
</li>
<li>
<p>Upload/Download Not Accepted (0x70)</p>
<ul>
<li>This NRC is typically associated with bootloader flashing or programming operations.</li>
<li>It indicates that the ECU cannot accept the data upload or download due to issues such as invalid memory addresses or data corruption.</li>
</ul>
</li>
<li>
<p>Transfer Data Suspended (0x71)</p>
<ul>
<li>This NRC is also related to bootloader flashing or programming operations.</li>
<li>It signifies that the data transfer has been suspended or interrupted, potentially due to data corruption, memory address issues, or other problems.</li>
</ul>
</li>
<li>
<p>General Programming Failure (0x72)</p>
<ul>
<li>This NRC is a general indication of a programming failure during bootloader flashing or programming operations.</li>
<li>It is returned when the specific root cause of the failure cannot be identified or is unknown.</li>
</ul>
</li>
<li>
<p>Wrong Block Sequence Counter (0x73)</p>
<ul>
<li>This NRC is associated with block transfer operations, where blocks of data are transferred in a specific sequence.</li>
<li>If the diagnostic tool or software sends a block with an incorrect sequence counter, the ECU will respond with NRC 0x73 (Wrong Block Sequence Counter).</li>
</ul>
</li>
<li>
<p>Request Correctly Received, Response Pending (0x78)</p>
<ul>
<li>This NRC indicates that the ECU has received the request correctly, but the response is pending due to various reasons, such as processing delays or state transitions.</li>
<li>The diagnostic tool or software should wait for the ECU to provide the actual response.</li>
</ul>
</li>
<li>
<p>Sub-Function Not Supported in Active Session (0x7E)</p>
<ul>
<li>This NRC occurs when the requested sub-function is not supported in the current active diagnostic session.</li>
<li>For example, attempting to perform a routine control operation in the default diagnostic session when it is only supported in the extended diagnostic session will result in NRC 0x7E (Sub-Function Not Supported in Active Session).</li>
</ul>
</li>
<li>
<p>Service Not Supported in Active Session (0x7F)</p>
<ul>
<li>Similar to the previous NRC, this NRC is returned when the requested service is not supported in the current active diagnostic session.</li>
<li>The diagnostic tool or software should transition to the appropriate diagnostic session to access the desired service.</li>
</ul>
</li>
</ol>
<p>Part 2: NRC Range 0x80 to 0xF0
The tutorial promises to cover the NRC range of 0x80 to 0xF0 in the next part, providing detailed explanations and scenarios for each NRC in this range.</p>
<p>Conclusion:
By understanding the various negative response codes (NRCs) and their meanings, diagnostic technicians and software developers can effectively troubleshoot and resolve communication issues between ECUs and diagnostic tools or software. This tutorial aims to provide a comprehensive guide to interpreting and addressing NRCs, enabling more efficient and accurate diagnostic processes.</p>
<p>Here is a detailed and comprehensive tutorial based on the provided content:</p>
<p>Title: Understanding Negative Response Codes (NRCs) in Unified Diagnostic Services - Part 2</p>
<p>Introduction:
In the previous tutorial, we covered the negative response codes (NRCs) in the range of 0x01 to 0x7F. This tutorial will focus on the NRC range of 0x80 to 0xF0, providing explanations and examples for each NRC in this range.</p>
<p>Part 2: NRC Range 0x80 to 0xF0</p>
<ol>
<li>
<p>RPM Too High (0x81)</p>
<ul>
<li>This NRC indicates that the requested action will not be performed because the server's prerequisite condition for RPM (revolutions per minute) is not met.</li>
<li>For example, if the requirement specifies that the ECU should not enter the extended diagnostic session when the engine RPM exceeds 3000, but the tester attempts to enter the extended session with an RPM of 3600-3700, the ECU will respond with NRC 0x81 (RPM Too High).</li>
</ul>
</li>
<li>
<p>RPM Too Low (0x82)</p>
<ul>
<li>This NRC is the opposite of the previous one, indicating that the requested action will not be performed because the server's prerequisite condition for RPM is not met due to the RPM being too low.</li>
<li>For instance, if the requirement states that the ECU should not enter sport mode when the engine RPM is below 3000, but the tester requests the sport mode routine with an RPM below the threshold, the ECU will respond with NRC 0x82 (RPM Too Low).</li>
</ul>
</li>
<li>
<p>Engine is Running (0x83)</p>
<ul>
<li>This NRC signifies that the requested action cannot be performed because the engine is currently running.</li>
<li>For example, if the requirement specifies that software flashing should not occur in the programming session when the engine is running, but the tester attempts to enter the programming session with the engine running, the ECU will respond with NRC 0x83 (Engine is Running).</li>
</ul>
</li>
<li>
<p>Engine is Not Running (0x84)</p>
<ul>
<li>This NRC is the opposite of the previous one, indicating that the requested action cannot be performed because the engine is not running.</li>
<li>For instance, if the requirement states that the ECU cannot actuate primary valves when the engine is off, but the tester tries to actuate the valves with the engine off, the ECU will respond with NRC 0x84 (Engine is Not Running).</li>
</ul>
</li>
<li>
<p>Engine Runtime Too Low (0x85)</p>
<ul>
<li>This NRC indicates that the requested action will not be performed because the server's prerequisite condition for engine runtime is too low, which is not met to read emission parameters.</li>
<li>For example, if the requirement specifies that the engine runtime should be above a certain threshold to read emission-related information, but the tester attempts to read this information when the engine runtime is too short, the ECU will respond with NRC 0x85 (Engine Runtime Too Low).</li>
</ul>
</li>
<li>
<p>Temperature Too High (0x86)</p>
<ul>
<li>This NRC signifies that the requested action will not be performed because the server's prerequisite condition for temperature is too high, which is not met.</li>
<li>For instance, if the requirement states that the coolant system should be switched off only when the temperature goes below a specific threshold, but the tester tries to switch off the coolant system when the temperature is too high, the ECU will respond with NRC 0x86 (Temperature Too High).</li>
</ul>
</li>
<li>
<p>Temperature Too Low (0x87)</p>
<ul>
<li>This NRC is the opposite of the previous one, indicating that the requested action will not be performed because the server's prerequisite condition for temperature is too low, which is not met.</li>
<li>For example, if the requirement specifies that the coolant system should be switched on only when the temperature goes above a critical value, but the tester tries to start the coolant routine when the temperature is too low, the ECU will respond with NRC 0x87 (Temperature Too Low).</li>
</ul>
</li>
<li>
<p>Vehicle Speed Too High (0x88)</p>
<ul>
<li>This NRC indicates that the requested action will not be performed because the server's prerequisite condition for vehicle speed is not met due to the vehicle speed being too high.</li>
<li>For instance, if the requirement states that the ECU should not enter the extended diagnostic session when the vehicle speed exceeds 25 km/h, but the tester attempts to enter the extended session with a vehicle speed of 80 km/h, the ECU will respond with NRC 0x88 (Vehicle Speed Too High).</li>
</ul>
</li>
<li>
<p>Vehicle Speed Too Low (0x89)</p>
<ul>
<li>This NRC is the opposite of the previous one, indicating that the requested action will not be performed because the server's prerequisite condition for vehicle speed is not met due to the vehicle speed being too low.</li>
<li>For example, if the requirement specifies that the ECU should enter sport mode only when the vehicle speed is above 180 km/h, but the tester requests the sport mode routine with a vehicle speed of 100 km/h, the ECU will respond with NRC 0x89 (Vehicle Speed Too Low).</li>
</ul>
</li>
</ol>
<p>The tutorial promises to cover the remaining NRCs in the range of 0x88 to 0x93 in the next part.</p>
<p>Conclusion:
By understanding the NRCs in the range of 0x80 to 0xF0, diagnostic technicians and software developers can effectively troubleshoot and resolve issues related to various server prerequisite conditions, such as RPM, engine state, temperature, and vehicle speed. This tutorial aims to provide practical examples and requirements to aid in comprehending and addressing these NRCs in diagnostic communication scenarios.</p>
<p>Here is a detailed and comprehensive tutorial based on the provided content:</p>
<p>Title: Understanding Negative Response Codes (NRCs) in Unified Diagnostic Services - Part 3</p>
<p>Introduction:
In the previous tutorials, we covered the NRC ranges of 0x01 to 0x7F and 0x80 to 0x93. This tutorial will focus on the remaining NRCs in the range of 0x94 to 0xF0, providing explanations and examples for each NRC.</p>
<p>Part 3: NRC Range 0x94 to 0xF0</p>
<ol>
<li>
<p>Throttle Position Too High (0x8A)</p>
<ul>
<li>This NRC indicates that the requested action will not be performed because the server's prerequisite condition for the throttle position being too high is not met.</li>
<li>For example, if the requirement states that the ECU cannot decrease the throttle position when the target torque speed is higher than the current speed, but the tester tries to decrease the throttle position using the routine control service (0x31), the ECU will respond with NRC 0x8A (Throttle Position Too High).</li>
</ul>
</li>
<li>
<p>Throttle Position Too Low (0x8B)</p>
<ul>
<li>This NRC is the opposite of the previous one, indicating that the requested action will not be performed because the server's prerequisite condition for the throttle position being too low is not met.</li>
<li>For instance, if the requirement specifies that the ECU cannot increase the throttle position when the target torque speed is lower than the current speed, but the tester attempts to increase the throttle position using the routine control service (0x31), the ECU will respond with NRC 0x8B (Throttle Position Too Low).</li>
</ul>
</li>
<li>
<p>Transmission Range Not in Neutral (0xAC)</p>
<ul>
<li>This NRC signifies that the requested action will not be performed because the server's prerequisite condition for the transmission range being in neutral is not met.</li>
<li>For example, if the requirement states that the ECU cannot read emission-related information when the gear is in neutral, but the tester tries to read emission-related information using the service 0x19 (sub-function 0x11) with the gear in neutral, the ECU will respond with NRC 0xAC (Transmission Range Not in Neutral).</li>
</ul>
</li>
<li>
<p>Transmission Range Not in Gear (0x8D)</p>
<ul>
<li>This NRC indicates that the requested action will not be performed because the server's prerequisite condition for the transmission range not being in a specific gear is not met.</li>
<li>For instance, if the requirement specifies that the ECU cannot activate brake valves when the vehicle is not in gear, but the tester tries to activate brake valves using the routine control service (0x31, sub-function 0x01) with the transmission not in gear, the ECU will respond with NRC 0x8D (Transmission Range Not in Gear).</li>
</ul>
</li>
<li>
<p>Brake Switch Not Closed (0x8F)</p>
<ul>
<li>This NRC signifies that the requested action will not be performed because the server's prerequisite condition for the brake switch being closed is not met.</li>
<li>For example, if the requirement states that the ECU cannot illuminate the rear light when the brake is not applied, but the tester tries to run a routine (0x31, 0x01, routine identifier 0x85, 0x6E) to illuminate the rear light with the brake switch open (brake not applied), the ECU will respond with NRC 0x8F (Brake Switch Not Closed).</li>
</ul>
</li>
<li>
<p>Voltage Too High (0x92)</p>
<ul>
<li>This NRC indicates that the requested action will not be performed because the server's prerequisite condition for the voltage being too high is not met.</li>
<li>For instance, if the requirement specifies that the ECU cannot work at a voltage higher than the calibrated level (e.g., 12.5V), but the tester tries to read the diagnostic session with a voltage of 12.78V, the ECU will respond with NRC 0x92 (Voltage Too High).</li>
</ul>
</li>
<li>
<p>Voltage Too Low (0x93)</p>
<ul>
<li>This NRC is the opposite of the previous one, indicating that the requested action will not be performed because the server's prerequisite condition for the voltage being too low is not met.</li>
<li>For example, if the requirement states that the ECU cannot work at a voltage lower than the calibrated level, but the tester tries to read the diagnostic session with a voltage of 0.59V, the ECU will respond with NRC 0x93 (Voltage Too Low).</li>
</ul>
</li>
</ol>
<p>Conclusion:
By understanding the NRCs in the range of 0x94 to 0xF0, diagnostic technicians and software developers can effectively troubleshoot and resolve issues related to various server prerequisite conditions, such as throttle position, transmission range, brake switch status, and voltage levels. This tutorial aims to provide practical examples and requirements to aid in comprehending and addressing these NRCs in diagnostic communication scenarios.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id=""><a class="header" href="#">...</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-1"><a class="header" href="#-1">...</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-2"><a class="header" href="#-2">...</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-3"><a class="header" href="#-3">...</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="glossary"><a class="header" href="#glossary">Glossary</a></h1>
<h2 id="term-example"><a class="header" href="#term-example">Term Example</a></h2>
<p><strong>Definition:</strong> Description of the term.</p>
<p><strong>Example:</strong> An example illustrating the usage of the term.</p>
<p><strong>Related Terms:</strong> Other terms related to this term.</p>
<h2 id="pci"><a class="header" href="#pci">PCI</a></h2>
<p><strong>Definition:</strong> Protocol Control Information. It refers to the part of a message in communication protocols such as Unified Diagnostic Services (UDS) that contains information about how the message is structured and should be interpreted.</p>
<p><strong>Example:</strong> In UDS, the PCI typically includes information such as message length and addressing details, aiding in proper message parsing by the receiving end.</p>
<p><strong>Related Terms:</strong> Service ID, Diagnostic Session Control, Electronic Control Unit (ECU), Unified Diagnostic Services (UDS).</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
